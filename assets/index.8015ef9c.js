var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,i=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&n(t,s,e[s]);if(r)for(var s of r(e))a.call(e,s)&&n(t,s,e[s]);return t},l=(t,r)=>e(t,s(r));import{W as c,V as d,C as u,_ as p,a as m,b as v,c as f,d as h,e as g,f as y,g as D,R as b,h as x,G as w,M as _,A as E,i as C,j as k,k as T,l as P,m as S,n as O,o as I,p as $,q as j,r as A,s as M,E as F,t as N,u as U,v as B,w as H,x as L,y as R,z as V,B as q,D as W,F as z,H as Y,P as J,I as K,J as X,K as G,L as Q,N as Z,O as tt,Q as et,S as st,T as rt,U as ot,X as at,Y as nt,Z as it,$ as lt,a0 as ct,a1 as dt,a2 as ut,a3 as pt}from"./vendor.bb230965.js";var mt=Object.defineProperty,vt=Object.getOwnPropertyDescriptor,ft=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?vt(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&mt(e,s,a),a};let ht=class extends d{constructor(){super(...arguments),this.dialog=!1,this.resolve=null,this.reject=null,this.message=null,this.title=null,this.options=this.getDefaultOptions()}onDialogChanged(t){t||(this.options=this.getDefaultOptions())}open(t,e,s){return this.dialog=!0,this.title=t,this.message=e,this.options=Object.assign(this.options,s),new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}confirm(){this.resolve&&this.resolve(!0),this.dialog=!1}cancel(){this.resolve&&this.resolve(!1),this.dialog=!1}getDefaultOptions(){return{color:"primary",width:290}}};ft([c("dialog")],ht.prototype,"onDialogChanged",1),ht=ft([u],ht);function gt(t,e,s,r,o,a,n,i){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):o&&(l=i?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}const yt={};var Dt=gt(ht,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s(m,[s(v,{attrs:{dark:"",color:t.options.color,dense:"",flat:""}},[s(f,{staticClass:"white--text"},[t._v(t._s(t.title))])],1),s(h,{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}],staticClass:"pa-4"},[t._v(t._s(t.message))]),s(g,{staticClass:"pt-0"},[s(y),s(D,{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(e){return t.confirm.apply(null,arguments)}}},[t._v("Yes")]),s(D,{attrs:{color:"grey",text:""},nativeOn:{click:function(e){return t.cancel.apply(null,arguments)}}},[t._v("Cancel")])],1)],1)],1)}),[],!1,(function(t){for(let e in yt)this[e]=yt[e]}),"46e29d48",null,null);Dt.options.__file="src/partials/dialogs/ConfirmDialog.vue";var bt=Dt.exports,xt=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,_t=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?wt(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&xt(e,s,a),a};let Et=class extends d{mounted(){this.$dialogs.confirm=this.confirmDialog}};_t([b("confirmDialog")],Et.prototype,"confirmDialog",2),Et=_t([u({components:{ConfirmDialog:bt}})],Et);const Ct={};var kt=gt(Et,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ConfirmDialog",{ref:"confirmDialog"})],1)}),[],!1,(function(t){for(let e in Ct)this[e]=Ct[e]}),"78500818",null,null);kt.options.__file="src/partials/dialogs/Dialogs.vue";var Tt=kt.exports;var Pt=[x(),t=>{t.subscribe(((t,e)=>{window.localStorage.setItem("xshed.storage",JSON.stringify(e))}))}];function St(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}const Ot=JSON.parse(window.localStorage.getItem("xshed.storage")||"{}"),It={Id:St(),Title:"Default",Color:"#1867c0"};function $t(t,e){const s=null!=t?t:new Date,r=6e4*(e||s.getTimezoneOffset());return new Date(s.getTime()-r).toISOString().slice(0,-1)}function jt(t){const e=$t(t),[s,r]=e.split(".")[0].replace("T"," ").split(" ");return[s,r.slice(0,5)].join(" ")}function At(t){return $t(t).slice(0,10)}const Mt=t=>{const e=t.AllDay?At(new Date(t.Start)):jt(new Date(t.Start)),s=t.AllDay?At(new Date(t.End)):jt(new Date(t.End)),r=Ut.getters.userProfileById(t.ProfileId);return{id:t.Id,name:t.Scope?`${t.Category}:${t.Scope}`:t.Category,start:e,end:s,allDay:!!t.AllDay,type:t.Category,scope:t.Scope,comment:t.Comment,category:r.Title}};const Ft=new C({state:class{constructor(){this.events=Ot.events||[],this.defaultProfile=Ot.defaultProfile||It,this.profiles=Ot.profiles||[It],this.selectedProfileId=Ot.selectedProfileId||It.Id}},getters:class extends w{get profileEvents(){return this.state.events.filter((t=>t.ProfileId===this.state.selectedProfileId)).map(Mt)}get events(){return this.state.events.map(Mt)}get categories(){return[...this.state.events.reduce(((t,e)=>t.add(e.Category)),new Set).values()].filter(Boolean)}get scopes(){return[...this.state.events.reduce(((t,e)=>t.add(e.Scope||"")),new Set).values()].filter(Boolean)}get userProfile(){const t=this.state.selectedProfileId;return this.getters.userProfileById(t)}get userProfileById(){return t=>this.state.profiles.find((e=>e.Id===t))||this.state.defaultProfile}get userProfileByTitle(){return t=>this.state.profiles.find((e=>e.Title===t))||this.state.defaultProfile}},mutations:class extends _{setEvent(t){const e=this.state.events,s=e.findIndex((e=>e.Id===t.Id));-1!==s?d.set(e,s,t):e.push(t)}removeEvent(t){const e=this.state.events,s=e.findIndex((e=>e.Id===t));-1!==s&&e.splice(s,1)}setProfile(t){this.state.profiles.push(t)}setSelectedProfile(t){this.state.selectedProfileId=t}resetState(){this.state.profiles=[],this.state.events=[],this.state.selectedProfileId=""}commitState(){}},actions:class extends E{async addEvent(t){const e=t.ProfileId||this.getters.userProfile.Id,s=l(i({},t),{ProfileId:e});this.commit("setEvent",s)}async updateEvent(t){this.commit("setEvent",t)}async updatePartialEvent(t){const e=this.state.events.findIndex((e=>e.Id===t.Id));if(e>=0){const s=this.state.events[e],r=i(i({},s),t);this.commit("setEvent",r)}}async deleteEvent(t){this.commit("removeEvent",t.id)}async addProfile(t){const e={Id:St(),Title:t.Title,Color:t.Color};this.commit("setProfile",e)}async cleanUpData(){this.commit("resetState"),localStorage.clear()}async importDataWithOverwrite(t){this.state.events=t.events||[],this.state.profiles=t.profiles||[],this.state.defaultProfile=t.defaultProfile,this.state.selectedProfileId=t.selectedProfileId||t.defaultProfile.Id,this.commit("commitState")}async importData(t){this.state.events=[...this.state.events,...t.events||[]],this.state.profiles=[...this.state.profiles,...t.profiles||[]],this.commit("commitState")}},modules:{}});d.use(k);const Nt=T(Ft,{plugins:Pt}),Ut=Ft.context(Nt);var Bt=new k.Store({state:{},mutations:{},actions:{},modules:{}});const Ht=P("#FFFFFF").rgba;function Lt(t){return S(P(t).rgba,Ht)>2}var Rt=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,qt=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?Vt(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Rt(e,s,a),a};let Wt=class extends d{constructor(){super(...arguments),this.dialog=!1,this.profile=this.getDefaultProfile()}get isBackgroundWhite(){return Lt(this.profile.Color)}get titleTextColor(){return`${Lt(this.profile.Color)?"white":"black"}--text`}open(){this.dialog=!0,this.profile=this.getDefaultProfile(),setTimeout((()=>this.titleTextField.focus()))}getDefaultProfile(){return{Title:"",Color:"#1976d2"}}async save(){await Ut.actions.addProfile(this.profile),this.close()}close(){this.dialog=!1}};qt([b("titleTextField")],Wt.prototype,"titleTextField",2),Wt=qt([u],Wt);const zt={};var Yt=gt(Wt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{"content-class":"add-profile-dialog",fullscreen:t.$vuetify.breakpoint.smAndDown,"max-width":"700px"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s(O,{staticClass:"pb-4"},[s(O,{attrs:{dark:t.isBackgroundWhite}},[s("div",{staticClass:"dialog-title",style:{backgroundColor:t.profile.Color}},[s("div",{staticClass:"text-center text-h5",class:[t.titleTextColor]},[t._v("Customize your profiles")]),s(I,{staticClass:"default-avatar",attrs:{size:"80",color:t.profile.Color}},[s($,{class:[t.titleTextColor],attrs:{large:""}},[t._v("mdi-account")])],1)],1)]),s("div",{staticClass:"d-flex flex-column mt-16 mx-4"},[s(j,{ref:"titleTextField",attrs:{filled:"",autofocus:"",placeholder:"Add a name or a label like Work or Personal"},model:{value:t.profile.Title,callback:function(e){t.$set(t.profile,"Title",e)},expression:"profile.Title"}}),s(m,{staticClass:"mx-auto",attrs:{elevation:"0",outlined:""}},[s(A,{staticClass:"pb-0"},[t._v("Pick a theme color")]),s(M,{staticClass:"color-picker",attrs:{mode:"hexa","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","swatches-max-height":"300px"},model:{value:t.profile.Color,callback:function(e){t.$set(t.profile,"Color",e)},expression:"profile.Color"}})],1),s("div",{staticClass:"d-flex justify-end mt-4"},[s(D,{attrs:{color:"primary",disabled:!t.profile.Title},on:{click:t.save}},[t._v("Done")])],1)],1)],1)],1)}),[],!1,(function(t){for(let e in zt)this[e]=zt[e]}),"655476ce",null,null);Yt.options.__file="src/partials/dialogs/AddProfileDialog.vue";var Jt=Yt.exports;var Kt=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor,Gt=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?Xt(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Kt(e,s,a),a};let Qt=class extends d{constructor(){super(...arguments),this.selectedItem=null}get currentProfile(){return Ut.getters.userProfile}get userProfiles(){return Ut.state.profiles}get selectedProfile(){return Ut.getters.userProfile}mounted(){this.selectedItem=this.currentProfile}userInitials(t){return function(t){var e,s;const r=new RegExp(/(\p{L}{1})\p{L}+/,"gu"),o=[...t.matchAll(r)];return(((null==(e=o.shift())?void 0:e[1])||"")+((null==(s=o.pop())?void 0:s[1])||"")).toUpperCase()}(t)}addProfile(){}selectCurrentProfile(t){this.selectedItem=t,Ut.commit("setSelectedProfile",t.Id)}};Gt([F()],Qt.prototype,"addProfile",1),Qt=Gt([u({components:{AddProfileDialog:Jt}})],Qt);const Zt={};var te=gt(Qt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(N,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[s(D,t._g(t._b({attrs:{icon:"",fab:""}},"v-btn",o,!1),r),[s(I,{attrs:{color:t.currentProfile.Color,size:"40"}},[s("span",{staticClass:"white--text text-subtitle-1"},[t._v(t._s(t.userInitials(t.currentProfile.Title)))])])],1)]}}])},[s(U,{attrs:{nav:""}},[s(B,{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[t._l(t.userProfiles,(function(e){return[s(H,{key:e.Id,on:{click:function(s){return t.selectCurrentProfile(e)}}},[s(L,[s(I,{attrs:{color:e.Color,size:"40"}},[s("span",{staticClass:"white--text text-subtitle-1"},[t._v(t._s(t.userInitials(e.Title)))])])],1),s(R,[t._v(t._s(e.Title))])],1)]}))],2),s(H,{attrs:{link:""},on:{click:t.addProfile}},[s(L,[s($,[t._v("mdi-plus")])],1),s(R,[t._v("Add")])],1)],1)],1)}),[],!1,(function(t){for(let e in Zt)this[e]=Zt[e]}),"09735245",null,null);te.options.__file="src/partials/navigation/UserAccounts.vue";var ee=te.exports,se=Object.defineProperty,re=Object.getOwnPropertyDescriptor,oe=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?re(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&se(e,s,a),a};let ae=class extends d{openProfileDialog(){this.addProfileDialog.open()}toggleAppTheme(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark;const t=this.$vuetify.theme.dark?"dark":"light";localStorage.setItem("xshed.app-theme",t)}};oe([b("addProfileDialog")],ae.prototype,"addProfileDialog",2),ae=oe([u({components:{AddProfileDialog:Jt,UserAccounts:ee}})],ae);const ne={};var ie=gt(ae,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(V,{attrs:{app:"",dense:"",elevation:"3"}},[s("div",{staticClass:"d-flex w-100",class:{container:this.$vuetify.breakpoint.lgAndUp}},[s(D,{staticClass:"btn-black",attrs:{tile:"",icon:"",fab:"",exact:"",to:{name:"Home"}}},[s($,[t._v("mdi-home")])],1),s(y),s(D,{staticClass:"btn-black",attrs:{icon:"",tile:""},on:{click:t.toggleAppTheme}},[s($,[t._v("mdi-theme-light-dark")])],1),s(D,{staticClass:"btn-black",attrs:{icon:"",tile:"",exact:"",to:{name:"Settings"}}},[s($,[t._v("mdi-cog")])],1),s("UserAccounts",{on:{"add-profile":t.openProfileDialog}})],1),s("AddProfileDialog",{ref:"addProfileDialog"})],1)}),[],!1,(function(t){for(let e in ne)this[e]=ne[e]}),"29bfa3ea",null,null);ie.options.__file="src/partials/Navigation.vue";var le=ie.exports,ce=Object.defineProperty,de=Object.getOwnPropertyDescriptor;let ue=class extends d{mounted(){this.restoreAppTheme()}restoreAppTheme(){const t=localStorage.getItem("xshed.app-theme");this.$vuetify.theme.dark=!(!t||"dark"!==t)}};ue=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?de(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&ce(e,s,a),a})([u({components:{Dialogs:Tt,Navigation:le}})],ue);const pe={};var me=gt(ue,(function(){var t=this.$createElement,e=this._self._c||t;return e(q,[e("Navigation"),e(W,{staticClass:"mt-4 mx-2"},[e("router-view")],1),e("Dialogs")],1)}),[],!1,(function(t){for(let e in pe)this[e]=pe[e]}),null,null,null);me.options.__file="src/App.vue";var ve=me.exports;let fe;const he={};var ge=Object.defineProperty,ye=Object.getOwnPropertyDescriptor,De=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?ye(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&ge(e,s,a),a};let be=class extends d{created(){this.restoreCalendarType()}storeCalendarType(t){localStorage.setItem("xshed.calendar-view",t)}restoreCalendarType(){this.view=localStorage.getItem("xshed.calendar-view")||"day"}};De([z()],be.prototype,"view",2),be=De([u],be);const xe={};var we=gt(be,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(Y,{staticClass:"calendar-view-switcher",attrs:{borderless:"",mandatory:""},on:{change:t.storeCalendarType},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[s(D,{attrs:{value:"day",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Day")]),s($,[t._v("mdi-calendar-today")])],1),s(D,{attrs:{value:"week",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Week")]),s($,[t._v("mdi-calendar-range")])],1),s(D,{attrs:{value:"month",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Month")]),s($,[t._v("mdi-calendar-month")])],1),s(D,{attrs:{value:"category",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Profiles")]),s($,[t._v("mdi-select-compare")])],1)],1)}),[],!1,(function(t){for(let e in xe)this[e]=xe[e]}),"904d779e",null,null);we.options.__file="src/components/home/CalendarViewSwitcher.vue";var _e=we.exports,Ee=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,ke=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?Ce(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Ee(e,s,a),a};let Te=class extends d{constructor(){super(...arguments),this.dateMenu=!1}get datePickerType(){return"month"===this.view?"MONTH":"DATE"}nextTimestamp(){}prevTimestamp(){}toToday(){}openDialog(){}};ke([z()],Te.prototype,"view",2),ke([J()],Te.prototype,"dateString",2),ke([K("date")],Te.prototype,"date_",2),ke([F()],Te.prototype,"nextTimestamp",1),ke([F()],Te.prototype,"prevTimestamp",1),ke([F()],Te.prototype,"toToday",1),ke([F()],Te.prototype,"openDialog",1),Te=ke([u({components:{CalendarViewSwitcher:_e}})],Te);const Pe={};var Se=gt(Te,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"calendar-ribbon"},[s(O,[s(X,{attrs:{"no-gutters":""}},[s(G,{staticClass:"d-flex",attrs:{cols:"12",sm:""}},[s(Q,{attrs:{bottom:"","open-delay":"900"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[s(D,t._g(t._b({staticClass:"mr-2",attrs:{outlined:"",large:"",color:"grey darken-2"},on:{click:t.openDialog}},"v-btn",o,!1),r),[s($,[t._v("mdi-calendar-plus")]),s("span",{staticClass:"hidden-sm-and-down ms-1"},[t._v("Add event")])],1)]}}])},[s("span",[t._v("Add office visit")])]),s(Q,{attrs:{bottom:"","open-delay":"900"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[s(D,t._g(t._b({attrs:{outlined:"",large:"",color:"grey darken-2"},on:{click:t.toToday}},"v-btn",o,!1),r),[s($,[t._v("mdi-calendar-cursor")]),s("span",{staticClass:"hidden-md-and-down ms-1"},[t._v("Show today")])],1)]}}])},[s("span",[t._v("Move to today date")])]),s(y),t.$vuetify.breakpoint.smAndDown?s(_e,{model:{value:t.view,callback:function(e){t.view=e},expression:"view"}}):t._e()],1),s(G,{attrs:{cols:"12",sm:""}},[s(m,{staticClass:"d-flex align-center justify-space-between mx-2 text-truncate",attrs:{outlined:""}},[s(D,{staticClass:"px-0",attrs:{text:"",large:"",color:"grey darken-2","min-width":"40"},on:{click:t.prevTimestamp}},[s($,[t._v("mdi-chevron-left")])],1),s(N,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[s(D,t._g(t._b({staticStyle:{"letter-spacing":"normal","font-weight":"normal"},attrs:{text:""}},"v-btn",o,!1),r),[t.dateString?s(f,{staticClass:"mx-4"},[t._v(" "+t._s(t.dateString)+" ")]):t._e()],1)]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[s(Z,{attrs:{"active-picker":t.datePickerType,"no-title":"",scrollable:""},on:{input:function(e){t.dateMenu=!1}},model:{value:t.date_,callback:function(e){t.date_=e},expression:"date_"}})],1),s(D,{staticClass:"px-0",attrs:{text:"",large:"",color:"grey darken-2","min-width":"40"},on:{click:t.nextTimestamp}},[s($,[t._v("mdi-chevron-right")])],1)],1)],1),t.$vuetify.breakpoint.mdAndUp?s(G,[s(_e,{staticClass:"d-flex justify-end",model:{value:t.view,callback:function(e){t.view=e},expression:"view"}})],1):t._e()],1)],1)],1)}),[],!1,(function(t){for(let e in Pe)this[e]=Pe[e]}),"7d7fffbf",null,null);Se.options.__file="src/components/home/CalendarRibbon.vue";var Oe=Se.exports;function Ie(t){if(!t)return"#111";let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);let s="#";for(let r=0;r<3;r++){s+=("00"+(e>>8*r&255).toString(16)).substr(-2)}return s}var $e=Object.defineProperty,je=Object.getOwnPropertyDescriptor,Ae=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?je(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&$e(e,s,a),a};let Me=class extends d{get getComment(){return this.visit.comment||"The event comment was not provided"}get getEventColor(){return this.visit?Ie(this.visit.type):"#222"}get getTextColorClass(){return`${Lt(this.getEventColor)?"white":"black"}--text`}get isBackgroundWhite(){return Lt(this.getEventColor)}openEditDialog(t){return t}async deleteVisitEvent(t){if(t.id){await this.$dialogs.confirm.open("Delete","Are you sure you want to delete this visit?",{color:"error"})&&(await Ut.actions.deleteEvent(t),this.close())}}close(){}};Ae([J({type:Object,required:!0})],Me.prototype,"visit",2),Ae([F()],Me.prototype,"openEditDialog",1),Ae([F()],Me.prototype,"close",1),Me=Ae([u],Me);const Fe={};var Ne=gt(Me,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(m,{attrs:{flat:"","min-width":"350px"}},[s(v,{class:t.getTextColorClass,attrs:{color:t.getEventColor}},[s(f,{staticClass:"ml-3",domProps:{textContent:t._s(t.visit.name)}}),s(y),s(D,{attrs:{dark:t.isBackgroundWhite,icon:""},on:{click:t.close}},[s($,{class:t.getTextColorClass},[t._v("mdi-window-close")])],1)],1),s(h,[s("div",{staticClass:"mb-2"},[s("h3",[t._v("Comment")]),s("div",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.getComment)+" ")])])]),s(g,[s(D,{attrs:{color:"error",elevation:"0"},on:{click:function(e){return t.deleteVisitEvent(t.visit)}}},[s($,{staticClass:"mr-2"},[t._v("mdi-delete")]),t._v(" Delete ")],1),s(D,{attrs:{color:"primary",elevation:"0"},on:{click:function(e){return t.openEditDialog(t.visit)}}},[s($,{staticClass:"mr-2"},[t._v("mdi-pencil")]),t._v(" Edit ")],1)],1)],1)}),[],!1,(function(t){for(let e in Fe)this[e]=Fe[e]}),"5abe9104",null,null);Ne.options.__file="src/components/home/VisitEventMenuPreview.vue";var Ue=Ne.exports;const Be=t=>e=>!!e||`${t} field is mandatory`;function He(t,e){return new Date(t.getTime()+6e4*e)}function Le(t){return new Intl.DateTimeFormat("en-US",{timeStyle:"short",hour12:!1}).format(t)}function Re(t,e,s=15){let r=new Date;const[o,a]=t.split(":");r.setHours(Number(o),Number(a),0,0);const n=[];for(;Le(r)<=e;)n.push(Le(r)),r=He(r,s);return n}var Ve=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,We=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?qe(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Ve(e,s,a),a};let ze=class extends d{constructor(){super(...arguments),this.formModel=!1,this.menu=!1,this.startDate=this.getDateString(this.event.start),this.startDateFormatted=this.formatDate(this.startDate),this.startTime=this.getTimeString(this.event.start),this.endTime=this.getTimeString(this.event.end||""),this.allDay=this.event.allDay,this.category=this.event.type||"",this.scope=this.event.scope||"",this.comment=this.event.comment||"",this.profile=Ut.getters.userProfileByTitle(this.event.category),this.validation={category:[Be("Category")]}}startDateUpdate(){this.startDateFormatted=this.formatDate(this.startDate)}get visitTimeItems(){return Re("7:00","20:00",15)}mounted(){this.categoryCombobox.setValue(this.category),this.scopeCombobox.setValue(this.scope)}formatDate(t){if(!t)return"";const[e,s,r]=t.split("-");return`${r}/${s}/${e}`}parseDate(t){if(!t)return"";const[e,s,r]=t.split("/");return`${r}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`}getDateString(t){return t.substr(0,10)}getTimeString(t){return t.substr(11,5)}makeDateTime(t,e){return`${t} ${e}`}closeDialog(){}save(){var t;if(!this.form.validate())return null;const e=this.allDay?"00:00":this.startTime,s=this.allDay?"23:59":this.endTime;return{Id:this.event.id,Start:this.makeDateTime(this.startDate,e),End:this.makeDateTime(this.startDate,s),AllDay:this.allDay,Category:this.category,Scope:this.scope,Comment:this.comment,ProfileId:null==(t=this.profile)?void 0:t.Id}}updateComboboxInput(t,e){this[t]=e}};We([J({required:!1,type:Object})],ze.prototype,"event",2),We([J({required:!1,type:Array})],ze.prototype,"categories",2),We([J({required:!1,type:Array})],ze.prototype,"scopes",2),We([J({required:!1,type:Array})],ze.prototype,"profiles",2),We([J({type:Boolean})],ze.prototype,"loading",2),We([J({type:Boolean})],ze.prototype,"isAdmin",2),We([b("form")],ze.prototype,"form",2),We([b("categoryCombobox")],ze.prototype,"categoryCombobox",2),We([b("scopeCombobox")],ze.prototype,"scopeCombobox",2),We([c("startDate")],ze.prototype,"startDateUpdate",1),We([F("close")],ze.prototype,"closeDialog",1),We([F()],ze.prototype,"save",1),ze=We([u],ze);const Ye={};var Je=gt(ze,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(m,[s(tt,[t._v("Edit event")]),s(h,[s(et,[s(st,{ref:"form",model:{value:t.formModel,callback:function(e){t.formModel=e},expression:"formModel"}},[s(X,[s(G,[s(N,{ref:"menu",attrs:{"offset-y":"","min-width":"auto",transition:"scale-transition","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[s(j,t._g(t._b({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(e){t.startDate=t.parseDate(t.startDateFormatted)}},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s(Z,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[s(y),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.startDate)}}},[t._v("OK")])],1)],1)],1),s(G,[s(rt,{attrs:{label:"All day visit"},model:{value:t.allDay,callback:function(e){t.allDay=e},expression:"allDay"}})],1)],1),t.allDay?t._e():s(X,[s(G,[s(ot,{attrs:{label:"Start time","prepend-icon":"mdi-clock-time-two-outline",items:t.visitTimeItems},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),s(G,[s(ot,{attrs:{label:"End time","prepend-icon":"mdi-clock-time-five-outline",items:t.visitTimeItems,rules:[function(e){return e>t.startTime||"End time should be greater than Start time"}]},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),s(X,[s(G,[s(at,{ref:"categoryCombobox",attrs:{label:"Category","prepend-icon":"mdi-tune-variant",items:t.categories,rules:t.validation.category},on:{"update:search-input":function(e){return t.updateComboboxInput("category",e)}}})],1),s(G,[s(at,{ref:"scopeCombobox",attrs:{label:"Scope","prepend-icon":"mdi-tune",items:t.scopes},on:{"update:search-input":function(e){return t.updateComboboxInput("scope",e)}}})],1)],1),s(X,[s(G,[s(ot,{attrs:{"item-text":"Title",label:"Profile","prepend-icon":"mdi-account","return-object":"",items:t.profiles},model:{value:t.profile,callback:function(e){t.profile=e},expression:"profile"}})],1)],1),s(X,[s(G,[s(nt,{attrs:{label:"Comment",counter:"",rows:"3","auto-grow":"","prepend-icon":"mdi-message-reply-text-outline"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1)],1),s(g,[s(y),s(D,{attrs:{color:"blue",text:""},on:{click:t.closeDialog}},[t._v("Close")]),s(D,{attrs:{color:"primary",disabled:!t.formModel,loading:t.loading},on:{click:t.save}},[t._v("Submit")])],1)],1)}),[],!1,(function(t){for(let e in Ye)this[e]=Ye[e]}),"7934f6e3",null,null);Je.options.__file="src/components/EditEventDialogForm.vue";var Ke=Je.exports,Xe=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor;let Qe=class extends d{constructor(){super(...arguments),this.model=!1,this.event=null,this.loading=!1}get fullscreenModal(){return this.$vuetify.breakpoint.smAndDown}get categories(){return Ut.getters.categories}get scopes(){return Ut.getters.scopes}get profiles(){return Ut.state.profiles}open(t){this.event=i({},t),this.model=!0}close(){this.model=!1,this.event=null}async onEventUpdate(t){if(t){this.loading=!0;try{await Ut.actions.updateEvent(t),this.model=!1}catch(e){console.error(e)}finally{this.loading=!1}}}};Qe=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?Ge(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Xe(e,s,a),a})([u({components:{EditEventDialogForm:Ke}})],Qe);const Ze={};var ts=gt(Qe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{fullscreen:t.fullscreenModal,"max-width":"700px"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t.model&&t.event?s(Ke,{attrs:{event:t.event,loading:t.loading,categories:t.categories,scopes:t.scopes,profiles:t.profiles},on:{close:t.close,save:t.onEventUpdate}}):t._e()],1)}),[],!1,(function(t){for(let e in Ze)this[e]=Ze[e]}),"3c737e60",null,null);ts.options.__file="src/partials/dialogs/EditEventDialog.vue";var es=ts.exports,ss=Object.defineProperty,rs=Object.getOwnPropertyDescriptor,os=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?rs(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&ss(e,s,a),a};let as=class extends d{constructor(){super(...arguments),this.formModel=!1,this.menu=!1,this.startDate=this.getLocalISODate(),this.startDateFormatted=this.formatDate(this.getLocalISODate()),this.startTime="",this.endTime="",this.allDay=!1,this.profile=Ut.getters.userProfile,this.category="",this.scope="",this.comment="",this.validation={category:[Be("Category")]}}startDateUpdate(){this.startDateFormatted=this.formatDate(this.startDate)}get visitTimeItems(){return Re("7:00","20:00",15)}formatDate(t){if(!t)return"";const[e,s,r]=t.split("-");return`${r}/${s}/${e}`}parseDate(t){if(!t)return"";const[e,s,r]=t.split("/");return`${r}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`}created(){const t=new Date,e=t=>t.toLocaleString("default",{minimumIntegerDigits:2});if(this.timestamp){this.startDate=this.timestamp.date,this.startTime=`${e(this.timestamp.hour)}:00`;const t=He(new Date(`${this.startDate} ${e(this.timestamp.hour)}:00`),15);return void(this.endTime=`${e(t.getHours())}:${e(t.getMinutes())}`)}if(this.event){const[t,e]=this.event.start.split(" ");this.startDate=t,this.startTime=e;const[s,r]=this.event.end.split(" ");return this.endTime=r,this.category=this.event.type,this.scope=this.event.scope,this.comment=this.event.comment,void(this.event.category&&(this.profile=Ut.getters.userProfileByTitle(this.event.category)))}this.startDate=t.toISOString().substr(0,10),this.startTime=`${e(t.getHours())}:00`;const s=He(new Date(`${this.startDate} ${e(t.getHours())}:00`),15);this.endTime=`${e(s.getHours())}:${e(s.getMinutes())}`}mounted(){this.focusCategoryCombobox()}focusCategoryCombobox(){setTimeout((()=>this.categoryCombobox.focus()))}makeDateTime(t,e){return`${t} ${e}`}closeDialog(){}save(){var t;if(!this.form.validate())return null;const e=this.allDay?"00:00":this.startTime,s=this.allDay?"23:59":this.endTime;return{Id:St(),Start:this.makeDateTime(this.startDate,e),End:this.makeDateTime(this.startDate,s),AllDay:this.allDay,Category:this.category,Scope:this.scope,Comment:this.comment,ProfileId:null==(t=this.profile)?void 0:t.Id}}getLocalISODate(){return $t(new Date).substr(0,10)}updateComboboxInput(t,e){this[t]=e}};os([J({required:!1,type:Object})],as.prototype,"timestamp",2),os([J({required:!1,type:Object})],as.prototype,"event",2),os([J({required:!1,type:Array})],as.prototype,"categories",2),os([J({required:!1,type:Array})],as.prototype,"scopes",2),os([J({required:!1,type:Array})],as.prototype,"profiles",2),os([J({type:Boolean})],as.prototype,"loading",2),os([J({type:Boolean})],as.prototype,"isAdmin",2),os([c("startDate")],as.prototype,"startDateUpdate",1),os([b("categoryCombobox")],as.prototype,"categoryCombobox",2),os([b("form")],as.prototype,"form",2),os([F("close")],as.prototype,"closeDialog",1),os([F()],as.prototype,"save",1),as=os([u],as);const ns={};var is=gt(as,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(m,[s(tt,[t._v("Create visit event")]),s(h,[s(et,[s(st,{ref:"form",model:{value:t.formModel,callback:function(e){t.formModel=e},expression:"formModel"}},[s(X,[s(G,[s(N,{ref:"menu",attrs:{transition:"scale-transition","offset-y":"","min-width":"auto","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[s(j,t._g(t._b({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(e){t.startDate=t.parseDate(t.startDateFormatted)}},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s(Z,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[s(y),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.startDate)}}},[t._v("OK")])],1)],1)],1),s(G,[s(rt,{attrs:{label:"All day visit"},model:{value:t.allDay,callback:function(e){t.allDay=e},expression:"allDay"}})],1)],1),t.allDay?t._e():s(X,[s(G,[s(ot,{attrs:{label:"Start time","prepend-icon":"mdi-clock-time-two-outline",items:t.visitTimeItems},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),s(G,[s(ot,{attrs:{label:"End time","prepend-icon":"mdi-clock-time-five-outline",items:t.visitTimeItems,rules:[function(e){return e>t.startTime||"End time should be greater than Start time"}]},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),s(X,[s(G,[s(at,{ref:"categoryCombobox",attrs:{label:"Category","prepend-icon":"mdi-tune-variant",items:t.categories,rules:t.validation.category},on:{"update:search-input":function(e){return t.updateComboboxInput("category",e)}}})],1),s(G,[s(at,{attrs:{label:"Scope","prepend-icon":"mdi-tune",items:t.scopes},on:{"update:search-input":function(e){return t.updateComboboxInput("scope",e)}}})],1)],1),s(X,[s(G,[s(ot,{attrs:{items:t.profiles,"item-text":"Title","return-object":"","prepend-icon":"mdi-account",label:"Profile"},model:{value:t.profile,callback:function(e){t.profile=e},expression:"profile"}})],1)],1),s(X,[s(G,[s(nt,{attrs:{label:"Comment",counter:"",rows:"3","auto-grow":"","prepend-icon":"mdi-message-reply-text-outline"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1)],1),s(it),s(g,[s(y),s(D,{attrs:{color:"blue",text:""},on:{click:t.closeDialog}},[t._v("Close")]),s(D,{attrs:{color:"primary",disabled:!t.formModel,loading:t.loading},on:{click:t.save}},[t._v("Create")])],1)],1)}),[],!1,(function(t){for(let e in ns)this[e]=ns[e]}),"1a0b71a4",null,null);is.options.__file="src/components/NewEventDialogForm.vue";var ls=is.exports,cs=Object.defineProperty,ds=Object.getOwnPropertyDescriptor;let us=class extends d{constructor(){super(...arguments),this.model=!1,this.timestamp=null,this.event=null,this.loading=!1}get fullscreenModal(){return this.$vuetify.breakpoint.smAndDown}get categories(){return Ut.getters.categories}get scopes(){return Ut.getters.scopes}get profiles(){return Ut.state.profiles}open(t){t&&(t.start?this.event=t:this.timestamp=t),this.model=!0}close(){this.model=!1,this.timestamp=void 0}async onEventSave(t){if(t){this.loading=!0;try{await Ut.actions.addEvent(t),this.model=!1}catch(e){console.error(e)}finally{this.loading=!1}}}};us=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?ds(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&cs(e,s,a),a})([u({components:{NewEventDialogForm:ls}})],us);const ps={};var ms=gt(us,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{fullscreen:t.fullscreenModal,"max-width":"700px"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t.model?s(ls,{attrs:{timestamp:t.timestamp,event:t.event,loading:t.loading,categories:t.categories,scopes:t.scopes,profiles:t.profiles},on:{close:t.close,save:t.onEventSave}}):t._e()],1)}),[],!1,(function(t){for(let e in ps)this[e]=ps[e]}),"7881b5b6",null,null);ms.options.__file="src/partials/dialogs/NewEventDialog.vue";var vs=ms.exports;function fs(t,e){const{down:s,roundTo:r}=i(i({},{down:!1,roundTo:60}),e),o=60*r*1e3;return s?t-t%o:t+(o-t%o)}function hs(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute).getTime()}var gs=Object.defineProperty,ys=Object.getOwnPropertyDescriptor,Ds=(t,e,s,r)=>{for(var o,a=r>1?void 0:r?ys(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&gs(e,s,a),a};let bs=class extends d{constructor(){super(...arguments),this.view="day",this.currentDate="",this.calendarReady=!1,this.weekdays=[1,2,3,4,5,6,0],this.roundMinutes=15,this.selectedEvent=null,this.selectedElement=null,this.isDragEvent=!1,this.draftEvent=null,this.extendEvent=null,this.dragEvent=null,this.dragTime=null,this.selectedOpen=!1}get calendarTitle(){if(!this.calendarReady)return"";const t=this.calendarInstance.title;if("day"===this.view){return`${this.currentDate?Number(this.currentDate.split("-").pop()):(new Date).getDate()} ${t}`}if("week"===this.view){const t=this.calendarInstance.lastStart,e=this.calendarInstance.lastEnd,s=t.day,r=e.day,o=new Date(t.date).toLocaleString("en-US",{month:"short"}),a=new Date(e.date).toLocaleString("en-US",{month:"short"});return`${s} ${o===a?"":o} ${t.year===e.year?"":t.year} - ${r} ${a} ${e.year}`}return t}get nowY(){return this.calendarReady?this.calendarInstance.timeToY(this.calendarInstance.times.now)+"px":"-10px"}get events(){if("month"===this.view)return Ut.getters.profileEvents;{const t="category"===this.view?[...Ut.getters.events]:[...Ut.getters.profileEvents];if(this.draftEvent&&t.push(this.draftEvent),this.extendEvent){const e=t.findIndex((t=>t.id===this.extendEvent.id));e>=0&&d.set(t,e,this.extendEvent)}if(this.dragEvent){const e=t.findIndex((t=>t.id===this.dragEvent.id));e>=0&&d.set(t,e,this.dragEvent)}return t}}get userProfileCategories(){return Ut.state.profiles.slice()}mounted(){this.calendarInstance.checkChange(),this.calendarReady=!0}toToday(){this.currentDate=""}setViewDay({date:t}){this.currentDate=t,this.view="day",localStorage.setItem("xshed.calendar-view",this.view)}nextTimestamp(){this.calendarInstance.next()}prevTimestamp(){this.calendarInstance.prev()}getEventColor(t){var e,s;const r=t.type?Ie(t.type):"#000000";return t.id===(null==(e=this.extendEvent)?void 0:e.id)||t.id===(null==(s=this.dragEvent)?void 0:s.id)?`${r}B3`:r}showEvent(t){const{nativeEvent:e,event:s}=t,r=()=>{this.selectedEvent=s,this.selectedElement=e.target,setTimeout((()=>{this.selectedOpen=!0}))};this.selectedOpen?(this.selectedOpen=!1,this.$nextTick(r)):r()}dragExistEvent(t){const e=t.nativeEvent;2===e.button?(this.isDragEvent=!0,this.dragEvent=i({},t.event)):e.stopPropagation()}createDraftEvent(t){const e=hs(t);if(this.dragEvent&&!this.dragTime){const t=new Date(this.dragEvent.start).getTime();this.dragTime=e-t}if(!this.isDragEvent&&null===this.draftEvent){const s=new Date(fs(e,{roundTo:this.roundMinutes,down:!0})),r=t.category?t.category:Ut.getters.userProfile;this.isDragEvent=!0,this.draftEvent={name:"#Draft event",start:jt(s),category:r.Title},this.updateDraftEvent(t)}}updateDraftEvent(t){const e=hs(t),s=new Date(fs(e,{roundTo:this.roundMinutes}));if(this.isDragEvent&&null!==this.draftEvent){const t=new Date(this.draftEvent.start);t.setHours(s.getHours()),t.setMinutes(s.getMinutes()),this.draftEvent=l(i({},this.draftEvent),{end:jt(t)})}else if(this.extendEvent){const t=new Date(this.extendEvent.start);t.setHours(s.getHours()),t.setMinutes(s.getMinutes()),this.extendEvent.end=jt(t)}else if(this.dragEvent&&this.dragTime){const t=new Date(this.dragEvent.start),s=new Date(this.dragEvent.end)-t,r=fs(e-this.dragTime,{roundTo:this.roundMinutes}),o=r+s;this.dragEvent.start=jt(new Date(r)),this.dragEvent.end=jt(new Date(o))}}async endDraftEvent(){if(this.isDragEvent=!1,this.draftEvent&&(this.openNewEventDialog(this.draftEvent),this.draftEvent=null),this.extendEvent){const t=this.extendEvent;this.extendEvent=null,await Ut.actions.updatePartialEvent({Id:t.id,End:t.end})}if(this.dragEvent){const t=this.dragEvent;this.dragEvent=null,this.dragTime=null;const e=Ut.getters.events.findIndex((e=>e.id===t.id));if(e>=0){const s=Ut.getters.events[e];if(s.start!==t.start&&s.end!==t.end){const e={Id:t.id,Start:t.start,End:t.end};await Ut.actions.updatePartialEvent(e)}}}}cancelDrag(){this.isDragEvent=!1,this.draftEvent=null,this.extendEvent=null,this.dragEvent=null,this.dragTime=null}extendEventBottom(t){this.extendEvent=t}openNewEventDialog(t){this.newEventDialog.open(t)}openEditEventDialog(t){this.editEventDialog.open(t)}closeSelectedEventMenu(){this.selectedOpen=!1}getTextColor(t){return Lt(t.type?Ie(t.type):"#222")?"white":"black"}};Ds([b("calendar")],bs.prototype,"calendarInstance",2),Ds([b("newEventDialog")],bs.prototype,"newEventDialog",2),Ds([b("editEventDialog")],bs.prototype,"editEventDialog",2),bs=Ds([u({components:{CalendarRibbon:Oe,VisitEventMenuPreview:Ue,NewEventDialog:vs,EditEventDialog:es}})],bs);const xs={};var ws=gt(bs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column"},[s(Oe,{staticClass:"mb-2",attrs:{date:t.currentDate,"date-string":t.calendarTitle},on:{"update:date":function(e){t.currentDate=e},"to-today":t.toToday,"next-timestamp":t.nextTimestamp,"prev-timestamp":t.prevTimestamp,"open-dialog":function(e){return t.openNewEventDialog()}},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}}),s(lt,{ref:"calendar",style:{"user-select":[this.isDragEvent?"none":""]},attrs:{type:t.view,categories:t.userProfileCategories,"category-text":"Title","category-show-all":"","first-time":"7:00","interval-count":14,weekdays:t.weekdays,events:t.events,"event-color":t.getEventColor,"event-text-color":t.getTextColor,locale:"en-US"},on:{"click:interval":t.openNewEventDialog,"click:event":t.showEvent,"click:date":t.setViewDay,"mousedown:event":t.dragExistEvent,"mousedown:time":t.createDraftEvent,"mousemove:time":t.updateDraftEvent,"mouseup:time":t.endDraftEvent,"mousedown:time-category":t.createDraftEvent,"mousemove:time-category":t.updateDraftEvent,"mouseup:time-category":t.endDraftEvent},nativeOn:{mouseleave:function(e){return t.cancelDrag.apply(null,arguments)}},scopedSlots:t._u([{key:"day-body",fn:function(e){var r=e.date,o=e.week;return[s("div",{staticClass:"v-current-time",class:{first:r===o[0].date},style:{top:t.nowY}})]}},{key:"event",fn:function(e){return[s("div",{staticClass:"v-event-draggable px-2",domProps:{innerHTML:t._s(e.eventSummary())}}),e.timed?s("div",{staticClass:"v-event-drag-bottom",on:{mousedown:function(s){return s.stopPropagation(),t.extendEventBottom(e.event)}}}):t._e()]}}]),model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}),s(N,{attrs:{activator:t.selectedElement,"close-on-content-click":!1,"max-width":"500px","offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[t.selectedEvent?[s(Ue,{attrs:{visit:t.selectedEvent},on:{close:t.closeSelectedEventMenu,"open-edit-dialog":t.openEditEventDialog}})]:t._e()],2),s("NewEventDialog",{ref:"newEventDialog"}),s("EditEventDialog",{ref:"editEventDialog"})],1)}),[],!1,(function(t){for(let e in xs)this[e]=xs[e]}),null,null,null);ws.options.__file="src/partials/home/Calendar.vue";var _s=ws.exports,Es=Object.defineProperty,Cs=Object.getOwnPropertyDescriptor;let ks=class extends d{};ks=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?Cs(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Es(e,s,a),a})([u({components:{Calendar:_s}})],ks);const Ts={};var Ps=gt(ks,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home",class:{container:this.$vuetify.breakpoint.lgAndUp}},[e("Calendar")],1)}),[],!1,(function(t){for(let e in Ts)this[e]=Ts[e]}),null,null,null);Ps.options.__file="src/views/Home.vue";var Ss=Ps.exports,Os=Object.defineProperty,Is=Object.getOwnPropertyDescriptor;let $s=class extends d{async deleteData(){await this.$dialogs.confirm.open("Delete data","All your data will be permanently deleted",{color:"error"})&&(await Ut.actions.cleanUpData(),await this.$router.push({name:"Home"}),window.location.reload())}};$s=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?Is(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Os(e,s,a),a})([u],$s);const js={};var As=gt($s,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(O,{staticClass:"settings-data-management py-4 px-6",attrs:{elevation:"1"}},[s(st,[s("h2",[t._v("Data management")]),s("br"),s("div",[t._v(" All you data (events, profiles, etc.) is stored locally in browser's localStorage. "),s("br"),t._v(" Data security is being provided and managed by the browser. "),s("br"),s("a",{ref:"https://developer.mozilla.org/docs/Web/API/Window/localStorage"},[t._v("Learn more")])]),s("div",{staticClass:"mt-5"},[s("div",{staticClass:"text--secondary"},[t._v("You can remove all your data here")]),s(D,{staticClass:"mt-2",attrs:{color:"error"},on:{click:t.deleteData}},[t._v("Delete all data")])],1)])],1)}),[],!1,(function(t){for(let e in js)this[e]=js[e]}),null,null,null);As.options.__file="src/partials/settings/SettingsDataManagement.vue";var Ms=As.exports,Fs=Object.defineProperty,Ns=Object.getOwnPropertyDescriptor;let Us=class extends d{constructor(){super(...arguments),this.dialog=!1,this.importData_=null}exportData(){const t=JSON.stringify(Ut.state),e=new Blob([t],{type:"application/json;charset=utf-8"}),s=`xshed export ${(new Date).toLocaleString()}.json`;ct.exports.saveAs(e,s)}async importData(t){if(t){const e=await this.parseFile(t);this.importData_=JSON.parse(e),this.dialog=!0}}parseFile(t){return new Promise(((e,s)=>{const r=new FileReader;r.onload=function(t){var s;e((null==(s=t.target)?void 0:s.result)||"")},r.onerror=function(t){s(t)},r.readAsText(t,"UTF-8")}))}async overwriteData(){await Ut.actions.importDataWithOverwrite(this.importData_),this.dialog=!1}async mergeData(){await Ut.actions.importData(this.importData_),this.dialog=!1}cancelImport(){this.importData_=null,this.dialog=!1}};Us=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?Ns(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Fs(e,s,a),a})([u],Us);const Bs={};var Hs=gt(Us,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(O,{staticClass:"settings-session-management py-4 px-6",attrs:{elevation:"1"}},[s(st,[s("h2",[t._v("Session management")]),s("br"),s("div",{staticClass:"text--secondary"},[t._v("Export your current session")]),s(D,{staticClass:"mt-2",attrs:{color:"primary"},on:{click:t.exportData}},[t._v("Export")]),s("div",{staticClass:"text--secondary mt-8"},[t._v("Import your session from file")]),s(dt,{attrs:{clearable:"",placeholder:"Select file",accept:"application/json"},on:{change:t.importData}}),s(p,{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s(m,[s(v,{attrs:{dark:"",color:"error",dense:"",flat:""}},[s(f,{staticClass:"white--text"},[t._v("Data merge request")])],1),s(h,{staticClass:"pa-4"},[t._v(" Do you what to merge you data with current session or overwrite it? ")]),s(g,{staticClass:"pt-0"},[s(y),s(D,{attrs:{color:"primary darken-1"},on:{click:t.overwriteData}},[t._v("Overwrite")]),s(D,{attrs:{color:"primary"},on:{click:t.mergeData}},[t._v("Merge")]),s(D,{attrs:{color:"grey",text:""},on:{click:t.cancelImport}},[t._v("Cancel")])],1)],1)],1)],1)],1)}),[],!1,(function(t){for(let e in Bs)this[e]=Bs[e]}),null,null,null);Hs.options.__file="src/partials/settings/SettingsSessionManagement.vue";var Ls=Hs.exports,Rs=Object.defineProperty,Vs=Object.getOwnPropertyDescriptor;let qs=class extends d{};qs=((t,e,s,r)=>{for(var o,a=r>1?void 0:r?Vs(e,s):e,n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r?o(e,s,a):o(a))||a);return r&&a&&Rs(e,s,a),a})([u({components:{SettingsDataManagement:Ms,SettingsSessionManagement:Ls}})],qs);const Ws={};var zs=gt(qs,(function(){var t=this.$createElement,e=this._self._c||t;return e(et,[e("SettingsSessionManagement"),e("SettingsDataManagement",{staticClass:"mt-4"})],1)}),[],!1,(function(t){for(let e in Ws)this[e]=Ws[e]}),"08c33770",null,null);zs.options.__file="src/views/Settings.vue";var Ys=zs.exports;d.use(ut);const Js=new ut({mode:"history",base:"/xshed/",routes:[{path:"/",name:"Home",component:Ss},{path:"/settings",name:"Settings",component:Ys},{path:"/about",name:"About",component:()=>function(t,e){if(!e)return t();if(void 0===fe){const t=document.createElement("link").relList;fe=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in he)return;he[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const r=document.createElement("link");return r.rel=e?"stylesheet":fe,e||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),e?new Promise(((t,e)=>{r.addEventListener("load",t),r.addEventListener("error",e)})):void 0}))).then((()=>t()))}((()=>import("./About.fc73c904.js")),["/xshed/assets/About.fc73c904.js","/xshed/assets/vendor.bb230965.js","/xshed/assets/vendor.6a8dfc42.css"])}]});d.use(pt);var Ks=new pt({});d.prototype.$dialogs={},d.config.productionTip=!1,new d({router:Js,store:Bt,vuetify:Ks,render:t=>t(ve)}).$mount("#app");export{gt as n};
