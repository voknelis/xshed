var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,i=(t,e)=>{for(var s in e||(e={}))a.call(e,s)&&o(t,s,e[s]);if(r)for(var s of r(e))n.call(e,s)&&o(t,s,e[s]);return t},l=(t,r)=>e(t,s(r));import{W as c,V as d,C as u,_ as p,a as m,b as v,c as f,d as h,e as g,f as y,g as D,h as x,G as b,M as w,A as _,i as E,j as C,k,l as T,m as P,n as S,o as O,p as $,q as I,r as j,s as A,E as M,t as F,u as N,v as U,w as B,x as H,y as L,z as R,B as V,D as q,F as W,H as z,P as Y,I as J,J as K,K as X,L as G,N as Q,O as Z,Q as tt,R as et,S as st,T as rt,U as at,X as nt,Y as ot,Z as it,$ as lt,a0 as ct,a1 as dt,a2 as ut}from"./vendor.fd151501.js";var pt=Object.defineProperty,mt=Object.getOwnPropertyDescriptor,vt=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?mt(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&pt(e,s,n),n};let ft=class extends d{constructor(){super(...arguments),this.dialog=!1,this.resolve=null,this.reject=null,this.message=null,this.title=null,this.options=this.getDefaultOptions()}onDialogChanged(t){t||(this.options=this.getDefaultOptions())}open(t,e,s){return this.dialog=!0,this.title=t,this.message=e,this.options=Object.assign(this.options,s),new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}confirm(){this.resolve&&this.resolve(!0),this.dialog=!1}cancel(){this.resolve&&this.resolve(!1),this.dialog=!1}getDefaultOptions(){return{color:"primary",width:290}}};vt([c("dialog")],ft.prototype,"onDialogChanged",1),ft=vt([u],ft);function ht(t,e,s,r,a,n,o,i){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):a&&(l=i?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}const gt={};var yt=ht(ft,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s(m,[s(v,{attrs:{dark:"",color:t.options.color,dense:"",flat:""}},[s(f,{staticClass:"white--text"},[t._v(t._s(t.title))])],1),s(h,{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}],staticClass:"pa-4"},[t._v(t._s(t.message))]),s(g,{staticClass:"pt-0"},[s(y),s(D,{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(e){return t.confirm.apply(null,arguments)}}},[t._v("Yes")]),s(D,{attrs:{color:"grey",text:""},nativeOn:{click:function(e){return t.cancel.apply(null,arguments)}}},[t._v("Cancel")])],1)],1)],1)}),[],!1,(function(t){for(let e in gt)this[e]=gt[e]}),"46e29d48",null,null);yt.options.__file="src/partials/dialogs/ConfirmDialog.vue";var Dt=yt.exports,xt=Object.defineProperty,bt=Object.getOwnPropertyDescriptor;let wt=class extends d{mounted(){this.$dialogs.confirm=this.$refs.confirmDialog}};wt=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?bt(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&xt(e,s,n),n})([u({components:{ConfirmDialog:Dt}})],wt);const _t={};var Et=ht(wt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ConfirmDialog",{ref:"confirmDialog"})],1)}),[],!1,(function(t){for(let e in _t)this[e]=_t[e]}),"a922c9fe",null,null);Et.options.__file="src/partials/dialogs/Dialogs.vue";var Ct=Et.exports;var kt=[x(),t=>{t.subscribe(((t,e)=>{window.localStorage.setItem("xshed.storage",JSON.stringify(e))}))}];function Tt(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}const Pt=JSON.parse(window.localStorage.getItem("xshed.storage")||"{}"),St={Id:Tt(),Title:"Default",Color:"#1867c0"};function Ot(t,e){const s=null!=t?t:new Date,r=6e4*(e||s.getTimezoneOffset());return new Date(s.getTime()-r).toISOString().slice(0,-1)}function $t(t){const e=Ot(t),[s,r]=e.split(".")[0].replace("T"," ").split(" ");return[s,r.slice(0,5)].join(" ")}function It(t){return Ot(t).slice(0,10)}const jt=t=>{const e=t.AllDay?It(new Date(t.Start)):$t(new Date(t.Start)),s=t.AllDay?It(new Date(t.End)):$t(new Date(t.End)),r=Ft.getters.userProfileById(t.ProfileId);return{id:t.Id,name:t.Scope?`${t.Category}:${t.Scope}`:t.Category,start:e,end:s,allDay:!!t.AllDay,type:t.Category,scope:t.Scope,comment:t.Comment,category:r.Title}};const At=new E({state:class{constructor(){this.events=Pt.events||[],this.defaultProfile=Pt.defaultProfile||St,this.profiles=Pt.profiles||[St],this.selectedProfileId=Pt.selectedProfileId||St.Id}},getters:class extends b{get profileEvents(){return this.state.events.filter((t=>t.ProfileId===this.state.selectedProfileId)).map(jt)}get events(){return this.state.events.map(jt)}get categories(){return[...this.state.events.reduce(((t,e)=>t.add(e.Category)),new Set).values()].filter(Boolean)}get scopes(){return[...this.state.events.reduce(((t,e)=>t.add(e.Scope||"")),new Set).values()].filter(Boolean)}get userProfile(){const t=this.state.selectedProfileId;return this.getters.userProfileById(t)}get userProfileById(){return t=>this.state.profiles.find((e=>e.Id===t))||this.state.defaultProfile}get userProfileByTitle(){return t=>this.state.profiles.find((e=>e.Title===t))||this.state.defaultProfile}},mutations:class extends w{setEvent(t){const e=this.state.events,s=e.findIndex((e=>e.Id===t.Id));-1!==s?d.set(e,s,t):e.push(t)}removeEvent(t){const e=this.state.events,s=e.findIndex((e=>e.Id===t));-1!==s&&e.splice(s,1)}setProfile(t){this.state.profiles.push(t)}setSelectedProfile(t){this.state.selectedProfileId=t}resetState(){this.state.profiles=[],this.state.events=[],this.state.selectedProfileId=""}commitState(){}},actions:class extends _{async addEvent(t){const e=t.ProfileId||this.getters.userProfile.Id,s=l(i({},t),{ProfileId:e});this.commit("setEvent",s)}async updateEvent(t){this.commit("setEvent",t)}async updatePartialEvent(t){const e=this.state.events.findIndex((e=>e.Id===t.Id));if(e>=0){const s=this.state.events[e],r=i(i({},s),t);this.commit("setEvent",r)}}async deleteEvent(t){this.commit("removeEvent",t.id)}async addProfile(t){const e={Id:Tt(),Title:t.Title,Color:t.Color};this.commit("setProfile",e)}async cleanUpData(){this.commit("resetState"),localStorage.clear()}async importDataWithOverwrite(t){this.state.events=t.events||[],this.state.profiles=t.profiles||[],this.state.defaultProfile=t.defaultProfile,this.state.selectedProfileId=t.selectedProfileId||t.defaultProfile.Id,this.commit("commitState")}async importData(t){this.state.events=[...this.state.events,...t.events||[]],this.state.profiles=[...this.state.profiles,...t.profiles||[]],this.commit("commitState")}},modules:{}});d.use(C);const Mt=k(At,{plugins:kt}),Ft=At.context(Mt);var Nt=new C.Store({state:{},mutations:{},actions:{},modules:{}});const Ut=T("#FFFFFF").rgba;function Bt(t){return P(T(t).rgba,Ut)>2}var Ht=Object.defineProperty,Lt=Object.getOwnPropertyDescriptor;let Rt=class extends d{constructor(){super(...arguments),this.dialog=!1,this.profile=this.getDefaultProfile()}get isBackgroundWhite(){return Bt(this.profile.Color)}get titleTextColor(){return`${Bt(this.profile.Color)?"white":"black"}--text`}open(){this.dialog=!0,this.profile=this.getDefaultProfile(),this.$nextTick((()=>{this.$nextTick((()=>{this.$refs.titleTextField.$el.focus()}))}))}getDefaultProfile(){return{Title:"",Color:"#1976d2"}}async save(){await Ft.actions.addProfile(this.profile),this.close()}close(){this.dialog=!1}};Rt=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?Lt(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Ht(e,s,n),n})([u],Rt);const Vt={};var qt=ht(Rt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{"content-class":"add-profile-dialog",fullscreen:t.$vuetify.breakpoint.smAndDown,"max-width":"700px"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s(S,{staticClass:"pb-4"},[s(S,{attrs:{dark:t.isBackgroundWhite}},[s("div",{staticClass:"dialog-title",style:{backgroundColor:t.profile.Color}},[s("div",{staticClass:"text-center text-h5",class:[t.titleTextColor]},[t._v("Customize your profiles")]),s(O,{staticClass:"default-avatar",attrs:{size:"80",color:t.profile.Color}},[s($,{class:[t.titleTextColor],attrs:{large:""}},[t._v("mdi-account")])],1)],1)]),s("div",{staticClass:"d-flex flex-column mt-16 mx-4"},[s(I,{ref:"titleTextField",attrs:{filled:"",autofocus:"",placeholder:"Add a name or a label like Work or Personal"},model:{value:t.profile.Title,callback:function(e){t.$set(t.profile,"Title",e)},expression:"profile.Title"}}),s(m,{staticClass:"mx-auto",attrs:{elevation:"0",outlined:""}},[s(j,{staticClass:"pb-0"},[t._v("Pick a theme color")]),s(A,{staticClass:"color-picker",attrs:{mode:"hexa","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","swatches-max-height":"300px"},model:{value:t.profile.Color,callback:function(e){t.$set(t.profile,"Color",e)},expression:"profile.Color"}})],1),s("div",{staticClass:"d-flex justify-end mt-4"},[s(D,{attrs:{color:"primary",disabled:!t.profile.Title},on:{click:t.save}},[t._v("Done")])],1)],1)],1)],1)}),[],!1,(function(t){for(let e in Vt)this[e]=Vt[e]}),"150652c0",null,null);qt.options.__file="src/partials/dialogs/AddProfileDialog.vue";var Wt=qt.exports;var zt=Object.defineProperty,Yt=Object.getOwnPropertyDescriptor,Jt=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?Yt(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&zt(e,s,n),n};let Kt=class extends d{constructor(){super(...arguments),this.selectedItem=null}get currentProfile(){return Ft.getters.userProfile}get userProfiles(){return Ft.state.profiles}get selectedProfile(){return Ft.getters.userProfile}mounted(){this.selectedItem=this.currentProfile}userInitials(t){return function(t){var e,s;const r=new RegExp(/(\p{L}{1})\p{L}+/,"gu"),a=[...t.matchAll(r)];return(((null==(e=a.shift())?void 0:e[1])||"")+((null==(s=a.pop())?void 0:s[1])||"")).toUpperCase()}(t)}addProfile(){}selectCurrentProfile(t){this.selectedItem=t,Ft.commit("setSelectedProfile",t.Id)}};Jt([M()],Kt.prototype,"addProfile",1),Kt=Jt([u({components:{AddProfileDialog:Wt}})],Kt);const Xt={};var Gt=ht(Kt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(F,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s(D,t._g(t._b({attrs:{icon:"",fab:""}},"v-btn",a,!1),r),[s(O,{attrs:{color:t.currentProfile.Color,size:"40"}},[s("span",{staticClass:"white--text text-subtitle-1"},[t._v(t._s(t.userInitials(t.currentProfile.Title)))])])],1)]}}])},[s(N,{attrs:{nav:""}},[s(U,{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[t._l(t.userProfiles,(function(e){return[s(B,{key:e.Id,on:{click:function(s){return t.selectCurrentProfile(e)}}},[s(H,[s(O,{attrs:{color:e.Color,size:"40"}},[s("span",{staticClass:"white--text text-subtitle-1"},[t._v(t._s(t.userInitials(e.Title)))])])],1),s(L,[t._v(t._s(e.Title))])],1)]}))],2),s(B,{attrs:{link:""},on:{click:t.addProfile}},[s(H,[s($,[t._v("mdi-plus")])],1),s(L,[t._v("Add")])],1)],1)],1)}),[],!1,(function(t){for(let e in Xt)this[e]=Xt[e]}),"09735245",null,null);Gt.options.__file="src/partials/navigation/UserAccounts.vue";var Qt=Gt.exports,Zt=Object.defineProperty,te=Object.getOwnPropertyDescriptor;let ee=class extends d{openProfileDialog(){this.$refs.addProfileDialog.open()}toggleAppTheme(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark;const t=this.$vuetify.theme.dark?"dark":"light";localStorage.setItem("xshed.app-theme",t)}};ee=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?te(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Zt(e,s,n),n})([u({components:{AddProfileDialog:Wt,UserAccounts:Qt}})],ee);const se={};var re=ht(ee,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(R,{attrs:{app:"",dense:"",elevation:"3"}},[s("div",{staticClass:"d-flex w-100",class:{container:this.$vuetify.breakpoint.lgAndUp}},[s(D,{staticClass:"btn-black",attrs:{tile:"",icon:"",fab:"",exact:"",to:{name:"Home"}}},[s($,[t._v("mdi-home")])],1),s(y),s(D,{staticClass:"btn-black",attrs:{icon:"",tile:""},on:{click:t.toggleAppTheme}},[s($,[t._v("mdi-theme-light-dark")])],1),s(D,{staticClass:"btn-black",attrs:{icon:"",tile:"",exact:"",to:{name:"Settings"}}},[s($,[t._v("mdi-cog")])],1),s("UserAccounts",{on:{"add-profile":t.openProfileDialog}})],1),s("AddProfileDialog",{ref:"addProfileDialog"})],1)}),[],!1,(function(t){for(let e in se)this[e]=se[e]}),"47c9f245",null,null);re.options.__file="src/partials/Navigation.vue";var ae=re.exports,ne=Object.defineProperty,oe=Object.getOwnPropertyDescriptor;let ie=class extends d{mounted(){this.restoreAppTheme()}restoreAppTheme(){const t=localStorage.getItem("xshed.app-theme");this.$vuetify.theme.dark=!(!t||"dark"!==t)}};ie=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?oe(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&ne(e,s,n),n})([u({components:{Dialogs:Ct,Navigation:ae}})],ie);const le={};var ce=ht(ie,(function(){var t=this.$createElement,e=this._self._c||t;return e(V,[e("Navigation"),e(q,{staticClass:"mt-4 mx-2"},[e("router-view")],1),e("Dialogs")],1)}),[],!1,(function(t){for(let e in le)this[e]=le[e]}),null,null,null);ce.options.__file="src/App.vue";var de=ce.exports;let ue;const pe={};var me=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,fe=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?ve(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&me(e,s,n),n};let he=class extends d{created(){this.restoreCalendarType()}storeCalendarType(t){localStorage.setItem("xshed.calendar-view",t)}restoreCalendarType(){this.view=localStorage.getItem("xshed.calendar-view")||"day"}};fe([W()],he.prototype,"view",2),he=fe([u],he);const ge={};var ye=ht(he,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(z,{staticClass:"calendar-view-switcher",attrs:{borderless:"",mandatory:""},on:{change:t.storeCalendarType},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[s(D,{attrs:{value:"day",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Day")]),s($,[t._v("mdi-calendar-today")])],1),s(D,{attrs:{value:"week",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Week")]),s($,[t._v("mdi-calendar-range")])],1),s(D,{attrs:{value:"month",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Month")]),s($,[t._v("mdi-calendar-month")])],1),s(D,{attrs:{value:"category",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[t._v("Profiles")]),s($,[t._v("mdi-select-compare")])],1)],1)}),[],!1,(function(t){for(let e in ge)this[e]=ge[e]}),"904d779e",null,null);ye.options.__file="src/components/home/CalendarViewSwitcher.vue";var De=ye.exports,xe=Object.defineProperty,be=Object.getOwnPropertyDescriptor,we=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?be(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&xe(e,s,n),n};let _e=class extends d{constructor(){super(...arguments),this.dateMenu=!1}get datePickerType(){return"month"===this.view?"MONTH":"DATE"}nextTimestamp(){}prevTimestamp(){}toToday(){}openDialog(){}};we([W()],_e.prototype,"view",2),we([Y()],_e.prototype,"dateString",2),we([J("date")],_e.prototype,"date_",2),we([M()],_e.prototype,"nextTimestamp",1),we([M()],_e.prototype,"prevTimestamp",1),we([M()],_e.prototype,"toToday",1),we([M()],_e.prototype,"openDialog",1),_e=we([u({components:{CalendarViewSwitcher:De}})],_e);const Ee={};var Ce=ht(_e,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"calendar-ribbon"},[s(S,[s(K,{attrs:{"no-gutters":""}},[s(X,{staticClass:"d-flex",attrs:{cols:"12",sm:""}},[s(G,{attrs:{bottom:"","open-delay":"900"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s(D,t._g(t._b({staticClass:"mr-2",attrs:{outlined:"",large:"",color:"grey darken-2"},on:{click:t.openDialog}},"v-btn",a,!1),r),[s($,[t._v("mdi-calendar-plus")]),s("span",{staticClass:"hidden-sm-and-down ms-1"},[t._v("Add event")])],1)]}}])},[s("span",[t._v("Add office visit")])]),s(G,{attrs:{bottom:"","open-delay":"900"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s(D,t._g(t._b({attrs:{outlined:"",large:"",color:"grey darken-2"},on:{click:t.toToday}},"v-btn",a,!1),r),[s($,[t._v("mdi-calendar-cursor")]),s("span",{staticClass:"hidden-md-and-down ms-1"},[t._v("Show today")])],1)]}}])},[s("span",[t._v("Move to today date")])]),s(y),t.$vuetify.breakpoint.smAndDown?s(De,{model:{value:t.view,callback:function(e){t.view=e},expression:"view"}}):t._e()],1),s(X,{attrs:{cols:"12",sm:""}},[s(m,{staticClass:"d-flex align-center justify-space-between mx-2 text-truncate",attrs:{outlined:""}},[s(D,{staticClass:"px-0",attrs:{text:"",large:"",color:"grey darken-2","min-width":"40"},on:{click:t.prevTimestamp}},[s($,[t._v("mdi-chevron-left")])],1),s(F,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s(D,t._g(t._b({staticStyle:{"letter-spacing":"normal","font-weight":"normal"},attrs:{text:""}},"v-btn",a,!1),r),[t.dateString?s(f,{staticClass:"mx-4"},[t._v(" "+t._s(t.dateString)+" ")]):t._e()],1)]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[s(Q,{attrs:{"active-picker":t.datePickerType,"no-title":"",scrollable:""},on:{input:function(e){t.dateMenu=!1}},model:{value:t.date_,callback:function(e){t.date_=e},expression:"date_"}})],1),s(D,{staticClass:"px-0",attrs:{text:"",large:"",color:"grey darken-2","min-width":"40"},on:{click:t.nextTimestamp}},[s($,[t._v("mdi-chevron-right")])],1)],1)],1),t.$vuetify.breakpoint.mdAndUp?s(X,[s(De,{staticClass:"d-flex justify-end",model:{value:t.view,callback:function(e){t.view=e},expression:"view"}})],1):t._e()],1)],1)],1)}),[],!1,(function(t){for(let e in Ee)this[e]=Ee[e]}),"7d7fffbf",null,null);Ce.options.__file="src/components/home/CalendarRibbon.vue";var ke=Ce.exports;function Te(t){if(!t)return"#111";let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);let s="#";for(let r=0;r<3;r++){s+=("00"+(e>>8*r&255).toString(16)).substr(-2)}return s}var Pe=Object.defineProperty,Se=Object.getOwnPropertyDescriptor,Oe=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?Se(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Pe(e,s,n),n};let $e=class extends d{get getComment(){return this.visit.comment||"The event comment was not provided"}get getEventColor(){return this.visit?Te(this.visit.type):"#222"}get getTextColorClass(){return`${Bt(this.getEventColor)?"white":"black"}--text`}get isBackgroundWhite(){return Bt(this.getEventColor)}openEditDialog(t){return t}async deleteVisitEvent(t){if(t.id){await this.$dialogs.confirm.open("Delete","Are you sure you want to delete this visit?",{color:"error"})&&(await Ft.actions.deleteEvent(t),this.close())}}close(){}};Oe([Y({type:Object,required:!0})],$e.prototype,"visit",2),Oe([M()],$e.prototype,"openEditDialog",1),Oe([M()],$e.prototype,"close",1),$e=Oe([u],$e);const Ie={};var je=ht($e,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(m,{attrs:{flat:"","min-width":"350px"}},[s(v,{class:t.getTextColorClass,attrs:{color:t.getEventColor}},[s(f,{staticClass:"ml-3",domProps:{textContent:t._s(t.visit.name)}}),s(y),s(D,{attrs:{dark:t.isBackgroundWhite,icon:""},on:{click:t.close}},[s($,{class:t.getTextColorClass},[t._v("mdi-window-close")])],1)],1),s(h,[s("div",{staticClass:"mb-2"},[s("h3",[t._v("Comment")]),s("div",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.getComment)+" ")])])]),s(g,[s(D,{attrs:{color:"error",elevation:"0"},on:{click:function(e){return t.deleteVisitEvent(t.visit)}}},[s($,{staticClass:"mr-2"},[t._v("mdi-delete")]),t._v(" Delete ")],1),s(D,{attrs:{color:"primary",elevation:"0"},on:{click:function(e){return t.openEditDialog(t.visit)}}},[s($,{staticClass:"mr-2"},[t._v("mdi-pencil")]),t._v(" Edit ")],1)],1)],1)}),[],!1,(function(t){for(let e in Ie)this[e]=Ie[e]}),"5abe9104",null,null);je.options.__file="src/components/home/VisitEventMenuPreview.vue";var Ae=je.exports;const Me=t=>e=>!!e||`${t} field is mandatory`;function Fe(t,e){return new Date(t.getTime()+6e4*e)}function Ne(t){return new Intl.DateTimeFormat("en-US",{timeStyle:"short",hour12:!1}).format(t)}function Ue(t,e,s=15){let r=new Date;const[a,n]=t.split(":");r.setHours(Number(a),Number(n),0,0);const o=[];for(;Ne(r)<=e;)o.push(Ne(r)),r=Fe(r,s);return o}var Be=Object.defineProperty,He=Object.getOwnPropertyDescriptor,Le=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?He(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Be(e,s,n),n};let Re=class extends d{constructor(){super(...arguments),this.formModel=!1,this.menu=!1,this.startDate=this.getDateString(this.event.start),this.startDateFormatted=this.formatDate(this.startDate),this.startTime=this.getTimeString(this.event.start),this.endTime=this.getTimeString(this.event.end||""),this.allDay=this.event.allDay,this.category=this.event.type||"",this.scope=this.event.scope||"",this.comment=this.event.comment||"",this.profile=Ft.getters.userProfileByTitle(this.event.category),this.validation={category:[Me("Category")]}}startDateUpdate(){this.startDateFormatted=this.formatDate(this.startDate)}get form(){return this.$refs.form}get visitTimeItems(){return Ue("7:00","20:00",15)}mounted(){this.$refs.categoryCombobox.setValue(this.category),this.$refs.scopeCombobox.setValue(this.scope)}formatDate(t){if(!t)return"";const[e,s,r]=t.split("-");return`${r}/${s}/${e}`}parseDate(t){if(!t)return"";const[e,s,r]=t.split("/");return`${r}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`}getDateString(t){return t.substr(0,10)}getTimeString(t){return t.substr(11,5)}makeDateTime(t,e){return`${t} ${e}`}closeDialog(){}save(){var t;if(!this.form.validate())return null;const e=this.allDay?"00:00":this.startTime,s=this.allDay?"23:59":this.endTime;return{Id:this.event.id,Start:this.makeDateTime(this.startDate,e),End:this.makeDateTime(this.startDate,s),AllDay:this.allDay,Category:this.category,Scope:this.scope,Comment:this.comment,ProfileId:null==(t=this.profile)?void 0:t.Id}}updateComboboxInput(t,e){this[t]=e}};Le([Y({required:!1,type:Object})],Re.prototype,"event",2),Le([Y({required:!1,type:Array})],Re.prototype,"categories",2),Le([Y({required:!1,type:Array})],Re.prototype,"scopes",2),Le([Y({required:!1,type:Array})],Re.prototype,"profiles",2),Le([Y({type:Boolean})],Re.prototype,"loading",2),Le([Y({type:Boolean})],Re.prototype,"isAdmin",2),Le([c("startDate")],Re.prototype,"startDateUpdate",1),Le([M("close")],Re.prototype,"closeDialog",1),Le([M()],Re.prototype,"save",1),Re=Le([u],Re);const Ve={};var qe=ht(Re,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(m,[s(Z,[t._v("Edit event")]),s(h,[s(tt,[s(et,{ref:"form",model:{value:t.formModel,callback:function(e){t.formModel=e},expression:"formModel"}},[s(K,[s(X,[s(F,{ref:"menu",attrs:{"offset-y":"","min-width":"auto",transition:"scale-transition","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s(I,t._g(t._b({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(e){t.startDate=t.parseDate(t.startDateFormatted)}},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},"v-text-field",a,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s(Q,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[s(y),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.startDate)}}},[t._v("OK")])],1)],1)],1),s(X,[s(st,{attrs:{label:"All day visit"},model:{value:t.allDay,callback:function(e){t.allDay=e},expression:"allDay"}})],1)],1),t.allDay?t._e():s(K,[s(X,[s(rt,{attrs:{label:"Start time","prepend-icon":"mdi-clock-time-two-outline",items:t.visitTimeItems},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),s(X,[s(rt,{attrs:{label:"End time","prepend-icon":"mdi-clock-time-five-outline",items:t.visitTimeItems,rules:[function(e){return e>t.startTime||"End time should be greater than Start time"}]},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),s(K,[s(X,[s(at,{ref:"categoryCombobox",attrs:{label:"Category","prepend-icon":"mdi-tune-variant",items:t.categories,rules:t.validation.category},on:{"update:search-input":function(e){return t.updateComboboxInput("category",e)}}})],1),s(X,[s(at,{ref:"scopeCombobox",attrs:{label:"Scope","prepend-icon":"mdi-tune",items:t.scopes},on:{"update:search-input":function(e){return t.updateComboboxInput("scope",e)}}})],1)],1),s(K,[s(X,[s(rt,{attrs:{"item-text":"Title",label:"Profile","prepend-icon":"mdi-account","return-object":"",items:t.profiles},model:{value:t.profile,callback:function(e){t.profile=e},expression:"profile"}})],1)],1),s(K,[s(X,[s(nt,{attrs:{label:"Comment",counter:"",rows:"3","auto-grow":"","prepend-icon":"mdi-message-reply-text-outline"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1)],1),s(g,[s(y),s(D,{attrs:{color:"blue",text:""},on:{click:t.closeDialog}},[t._v("Close")]),s(D,{attrs:{color:"primary",disabled:!t.formModel,loading:t.loading},on:{click:t.save}},[t._v("Submit")])],1)],1)}),[],!1,(function(t){for(let e in Ve)this[e]=Ve[e]}),"2eafe7f7",null,null);qe.options.__file="src/components/EditEventDialogForm.vue";var We=qe.exports,ze=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor;let Je=class extends d{constructor(){super(...arguments),this.model=!1,this.event=null,this.loading=!1}get fullscreenModal(){return this.$vuetify.breakpoint.smAndDown}get categories(){return Ft.getters.categories}get scopes(){return Ft.getters.scopes}get profiles(){return Ft.state.profiles}open(t){this.event=i({},t),this.model=!0}close(){this.model=!1,this.event=null}async onEventUpdate(t){if(t){this.loading=!0;try{await Ft.actions.updateEvent(t),this.model=!1}catch(e){console.error(e)}finally{this.loading=!1}}}};Je=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?Ye(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&ze(e,s,n),n})([u({components:{EditEventDialogForm:We}})],Je);const Ke={};var Xe=ht(Je,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{fullscreen:t.fullscreenModal,"max-width":"700px"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t.model&&t.event?s(We,{attrs:{event:t.event,loading:t.loading,categories:t.categories,scopes:t.scopes,profiles:t.profiles},on:{close:t.close,save:t.onEventUpdate}}):t._e()],1)}),[],!1,(function(t){for(let e in Ke)this[e]=Ke[e]}),"3c737e60",null,null);Xe.options.__file="src/partials/dialogs/EditEventDialog.vue";var Ge=Xe.exports,Qe=Object.defineProperty,Ze=Object.getOwnPropertyDescriptor,ts=(t,e,s,r)=>{for(var a,n=r>1?void 0:r?Ze(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Qe(e,s,n),n};let es=class extends d{constructor(){super(...arguments),this.formModel=!1,this.menu=!1,this.startDate=this.getLocalISODate(),this.startDateFormatted=this.formatDate(this.getLocalISODate()),this.startTime="",this.endTime="",this.allDay=!1,this.profile=Ft.getters.userProfile,this.category="",this.scope="",this.comment="",this.validation={category:[Me("Category")]}}startDateUpdate(){this.startDateFormatted=this.formatDate(this.startDate)}get form(){return this.$refs.form}get visitTimeItems(){return Ue("7:00","20:00",15)}formatDate(t){if(!t)return"";const[e,s,r]=t.split("-");return`${r}/${s}/${e}`}parseDate(t){if(!t)return"";const[e,s,r]=t.split("/");return`${r}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`}created(){const t=new Date,e=t=>t.toLocaleString("default",{minimumIntegerDigits:2});if(this.timestamp){this.startDate=this.timestamp.date,this.startTime=`${e(this.timestamp.hour)}:00`;const t=Fe(new Date(`${this.startDate} ${e(this.timestamp.hour)}:00`),15);return void(this.endTime=`${e(t.getHours())}:${e(t.getMinutes())}`)}if(this.event){const[t,e]=this.event.start.split(" ");this.startDate=t,this.startTime=e;const[s,r]=this.event.end.split(" ");return this.endTime=r,this.category=this.event.type,this.scope=this.event.scope,this.comment=this.event.comment,void(this.event.category&&(this.profile=Ft.getters.userProfileByTitle(this.event.category)))}this.startDate=t.toISOString().substr(0,10),this.startTime=`${e(t.getHours())}:00`;const s=Fe(new Date(`${this.startDate} ${e(t.getHours())}:00`),15);this.endTime=`${e(s.getHours())}:${e(s.getMinutes())}`}makeDateTime(t,e){return`${t} ${e}`}closeDialog(){}save(){var t;if(!this.form.validate())return null;const e=this.allDay?"00:00":this.startTime,s=this.allDay?"23:59":this.endTime;return{Id:Tt(),Start:this.makeDateTime(this.startDate,e),End:this.makeDateTime(this.startDate,s),AllDay:this.allDay,Category:this.category,Scope:this.scope,Comment:this.comment,ProfileId:null==(t=this.profile)?void 0:t.Id}}getLocalISODate(){return Ot(new Date).substr(0,10)}updateComboboxInput(t,e){this[t]=e}};ts([Y({required:!1,type:Object})],es.prototype,"timestamp",2),ts([Y({required:!1,type:Object})],es.prototype,"event",2),ts([Y({required:!1,type:Array})],es.prototype,"categories",2),ts([Y({required:!1,type:Array})],es.prototype,"scopes",2),ts([Y({required:!1,type:Array})],es.prototype,"profiles",2),ts([Y({type:Boolean})],es.prototype,"loading",2),ts([Y({type:Boolean})],es.prototype,"isAdmin",2),ts([c("startDate")],es.prototype,"startDateUpdate",1),ts([M("close")],es.prototype,"closeDialog",1),ts([M()],es.prototype,"save",1),es=ts([u],es);const ss={};var rs=ht(es,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(m,[s(Z,[t._v("Create visit event")]),s(h,[s(tt,[s(et,{ref:"form",model:{value:t.formModel,callback:function(e){t.formModel=e},expression:"formModel"}},[s(K,[s(X,[s(F,{ref:"menu",attrs:{transition:"scale-transition","offset-y":"","min-width":"auto","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s(I,t._g(t._b({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(e){t.startDate=t.parseDate(t.startDateFormatted)}},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},"v-text-field",a,!1),r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s(Q,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.menu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[s(y),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),s(D,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.startDate)}}},[t._v("OK")])],1)],1)],1),s(X,[s(st,{attrs:{label:"All day visit"},model:{value:t.allDay,callback:function(e){t.allDay=e},expression:"allDay"}})],1)],1),t.allDay?t._e():s(K,[s(X,[s(rt,{attrs:{label:"Start time","prepend-icon":"mdi-clock-time-two-outline",items:t.visitTimeItems},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),s(X,[s(rt,{attrs:{label:"End time","prepend-icon":"mdi-clock-time-five-outline",items:t.visitTimeItems,rules:[function(e){return e>t.startTime||"End time should be greater than Start time"}]},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),s(K,[s(X,[s(at,{attrs:{autofocus:"",label:"Category","prepend-icon":"mdi-tune-variant",items:t.categories,rules:t.validation.category},on:{"update:search-input":function(e){return t.updateComboboxInput("category",e)}}})],1),s(X,[s(at,{attrs:{label:"Scope","prepend-icon":"mdi-tune",items:t.scopes},on:{"update:search-input":function(e){return t.updateComboboxInput("scope",e)}}})],1)],1),s(K,[s(X,[s(rt,{attrs:{items:t.profiles,"item-text":"Title","return-object":"","prepend-icon":"mdi-account",label:"Profile"},model:{value:t.profile,callback:function(e){t.profile=e},expression:"profile"}})],1)],1),s(K,[s(X,[s(nt,{attrs:{label:"Comment",counter:"",rows:"3","auto-grow":"","prepend-icon":"mdi-message-reply-text-outline"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1)],1)],1),s(ot),s(g,[s(y),s(D,{attrs:{color:"blue",text:""},on:{click:t.closeDialog}},[t._v("Close")]),s(D,{attrs:{color:"primary",disabled:!t.formModel,loading:t.loading},on:{click:t.save}},[t._v("Create")])],1)],1)}),[],!1,(function(t){for(let e in ss)this[e]=ss[e]}),"7b81e549",null,null);rs.options.__file="src/components/NewEventDialogForm.vue";var as=rs.exports,ns=Object.defineProperty,os=Object.getOwnPropertyDescriptor;let is=class extends d{constructor(){super(...arguments),this.model=!1,this.timestamp=null,this.event=null,this.loading=!1}get fullscreenModal(){return this.$vuetify.breakpoint.smAndDown}get categories(){return Ft.getters.categories}get scopes(){return Ft.getters.scopes}get profiles(){return Ft.state.profiles}open(t){t&&(t.start?this.event=t:this.timestamp=t),this.model=!0}close(){this.model=!1,this.timestamp=void 0}async onEventSave(t){if(t){this.loading=!0;try{await Ft.actions.addEvent(t),this.model=!1}catch(e){console.error(e)}finally{this.loading=!1}}}};is=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?os(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&ns(e,s,n),n})([u({components:{NewEventDialogForm:as}})],is);const ls={};var cs=ht(is,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(p,{attrs:{fullscreen:t.fullscreenModal,"max-width":"700px"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t.model?s(as,{attrs:{timestamp:t.timestamp,event:t.event,loading:t.loading,categories:t.categories,scopes:t.scopes,profiles:t.profiles},on:{close:t.close,save:t.onEventSave}}):t._e()],1)}),[],!1,(function(t){for(let e in ls)this[e]=ls[e]}),"7881b5b6",null,null);cs.options.__file="src/partials/dialogs/NewEventDialog.vue";var ds=cs.exports;function us(t,e){const{down:s,roundTo:r}=i(i({},{down:!1,roundTo:60}),e),a=60*r*1e3;return s?t-t%a:t+(a-t%a)}function ps(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute).getTime()}var ms=Object.defineProperty,vs=Object.getOwnPropertyDescriptor;let fs=class extends d{constructor(){super(...arguments),this.view="day",this.currentDate="",this.calendarReady=!1,this.weekdays=[1,2,3,4,5,6,0],this.roundMinutes=15,this.selectedEvent=null,this.selectedElement=null,this.isDragEvent=!1,this.draftEvent=null,this.extendEvent=null,this.dragEvent=null,this.dragTime=null,this.selectedOpen=!1}get calendarInstance(){return this.$refs.calendar}get calendarTitle(){if(!this.calendarReady)return"";const t=this.calendarInstance.title;if("day"===this.view){return`${this.currentDate?Number(this.currentDate.split("-").pop()):(new Date).getDate()} ${t}`}if("week"===this.view){const t=this.calendarInstance.lastStart,e=this.calendarInstance.lastEnd,s=t.day,r=e.day,a=new Date(t.date).toLocaleString("en-US",{month:"short"}),n=new Date(e.date).toLocaleString("en-US",{month:"short"});return`${s} ${a===n?"":a} ${t.year===e.year?"":t.year} - ${r} ${n} ${e.year}`}return t}get nowY(){return this.calendarReady?this.calendarInstance.timeToY(this.calendarInstance.times.now)+"px":"-10px"}get events(){if("month"===this.view)return Ft.getters.profileEvents;{const t="category"===this.view?[...Ft.getters.events]:[...Ft.getters.profileEvents];if(this.draftEvent&&t.push(this.draftEvent),this.extendEvent){const e=t.findIndex((t=>t.id===this.extendEvent.id));e>=0&&d.set(t,e,this.extendEvent)}if(this.dragEvent){const e=t.findIndex((t=>t.id===this.dragEvent.id));e>=0&&d.set(t,e,this.dragEvent)}return t}}get userProfileCategories(){return Ft.state.profiles.slice()}mounted(){this.calendarInstance.checkChange(),this.calendarReady=!0}toToday(){this.currentDate=""}setViewDay({date:t}){this.currentDate=t,this.view="day"}nextTimestamp(){this.calendarInstance.next()}prevTimestamp(){this.calendarInstance.prev()}getEventColor(t){var e,s;const r=t.type?Te(t.type):"#000000";return t.id===(null==(e=this.extendEvent)?void 0:e.id)||t.id===(null==(s=this.dragEvent)?void 0:s.id)?`${r}B3`:r}showEvent(t){const{nativeEvent:e,event:s}=t,r=()=>{this.selectedEvent=s,this.selectedElement=e.target,setTimeout((()=>{this.selectedOpen=!0}))};this.selectedOpen?(this.selectedOpen=!1,setTimeout(r)):r()}dragExistEvent(t){this.isDragEvent=!0,this.dragEvent=i({},t.event)}createDraftEvent(t){const e=ps(t);if(this.dragEvent&&!this.dragTime){const t=new Date(this.dragEvent.start).getTime();this.dragTime=e-t}if(!this.isDragEvent&&null===this.draftEvent){const s=new Date(us(e,{roundTo:this.roundMinutes,down:!0})),r=t.category?t.category:Ft.getters.userProfile;this.isDragEvent=!0,this.draftEvent={name:"#Draft event",start:$t(s),category:r.Title},this.updateDraftEvent(t)}}updateDraftEvent(t){const e=ps(t),s=new Date(us(e,{roundTo:this.roundMinutes}));if(this.isDragEvent&&null!==this.draftEvent){const t=new Date(this.draftEvent.start);t.setHours(s.getHours()),t.setMinutes(s.getMinutes()),this.draftEvent=l(i({},this.draftEvent),{end:$t(t)})}else if(this.extendEvent){const t=new Date(this.extendEvent.start);t.setHours(s.getHours()),t.setMinutes(s.getMinutes()),this.extendEvent.end=$t(t)}else if(this.dragEvent&&this.dragTime){const t=new Date(this.dragEvent.start),s=new Date(this.dragEvent.end)-t,r=us(e-this.dragTime,{roundTo:this.roundMinutes}),a=r+s;this.dragEvent.start=$t(new Date(r)),this.dragEvent.end=$t(new Date(a))}}async endDraftEvent(){if(this.isDragEvent=!1,this.draftEvent&&(this.openNewEventDialog(this.draftEvent),this.draftEvent=null),this.extendEvent){const t=this.extendEvent;this.extendEvent=null,await Ft.actions.updatePartialEvent({Id:t.id,End:t.end})}if(this.dragEvent){const t=this.dragEvent;this.dragEvent=null,this.dragTime=null;const e=Ft.getters.events.findIndex((e=>e.id===t.id));if(e>=0){const s=Ft.getters.events[e];if(s.start!==t.start&&s.end!==t.end){const e={Id:t.id,Start:t.start,End:t.end};await Ft.actions.updatePartialEvent(e)}}}}cancelDrag(){this.isDragEvent=!1,this.draftEvent=null,this.extendEvent=null,this.dragEvent=null,this.dragTime=null}extendEventBottom(t){this.extendEvent=t}openNewEventDialog(t){this.$refs.newEventDialog.open(t)}openEditEventDialog(t){this.$refs.editEventDialog.open(t)}closeSelectedEventMenu(){this.selectedOpen=!1}getTextColor(t){return Bt(t.type?Te(t.type):"#222")?"white":"black"}};fs=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?vs(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&ms(e,s,n),n})([u({components:{CalendarRibbon:ke,VisitEventMenuPreview:Ae,NewEventDialog:ds,EditEventDialog:Ge}})],fs);const hs={};var gs=ht(fs,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column"},[s(ke,{staticClass:"mb-2",attrs:{date:t.currentDate,"date-string":t.calendarTitle},on:{"update:date":function(e){t.currentDate=e},"to-today":t.toToday,"next-timestamp":t.nextTimestamp,"prev-timestamp":t.prevTimestamp,"open-dialog":function(e){return t.openNewEventDialog()}},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}}),s(it,{ref:"calendar",style:{"user-select":[this.isDragEvent?"none":""]},attrs:{type:t.view,categories:t.userProfileCategories,"category-text":"Title","category-show-all":"","first-time":"7:00","interval-count":14,weekdays:t.weekdays,events:t.events,"event-color":t.getEventColor,"event-text-color":t.getTextColor,locale:"en-US"},on:{"click:interval":t.openNewEventDialog,"click:event":t.showEvent,"click:date":t.setViewDay,"mousedown:event":t.dragExistEvent,"mousedown:time":t.createDraftEvent,"mousemove:time":t.updateDraftEvent,"mouseup:time":t.endDraftEvent,"mousedown:time-category":t.createDraftEvent,"mousemove:time-category":t.updateDraftEvent,"mouseup:time-category":t.endDraftEvent},nativeOn:{mouseleave:function(e){return t.cancelDrag.apply(null,arguments)}},scopedSlots:t._u([{key:"day-body",fn:function(e){var r=e.date,a=e.week;return[s("div",{staticClass:"v-current-time",class:{first:r===a[0].date},style:{top:t.nowY}})]}},{key:"event",fn:function(e){return[s("div",{staticClass:"v-event-draggable px-2",domProps:{innerHTML:t._s(e.eventSummary())}}),e.timed?s("div",{staticClass:"v-event-drag-bottom",on:{mousedown:function(s){return s.stopPropagation(),t.extendEventBottom(e.event)}}}):t._e()]}}]),model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}),s(F,{attrs:{activator:t.selectedElement,"close-on-content-click":!1,"max-width":"500px","offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[t.selectedEvent?[s(Ae,{attrs:{visit:t.selectedEvent},on:{close:t.closeSelectedEventMenu,"open-edit-dialog":t.openEditEventDialog}})]:t._e()],2),s("NewEventDialog",{ref:"newEventDialog"}),s("EditEventDialog",{ref:"editEventDialog"})],1)}),[],!1,(function(t){for(let e in hs)this[e]=hs[e]}),null,null,null);gs.options.__file="src/partials/home/Calendar.vue";var ys=gs.exports,Ds=Object.defineProperty,xs=Object.getOwnPropertyDescriptor;let bs=class extends d{};bs=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?xs(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Ds(e,s,n),n})([u({components:{Calendar:ys}})],bs);const ws={};var _s=ht(bs,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home",class:{container:this.$vuetify.breakpoint.lgAndUp}},[e("Calendar")],1)}),[],!1,(function(t){for(let e in ws)this[e]=ws[e]}),null,null,null);_s.options.__file="src/views/Home.vue";var Es=_s.exports,Cs=Object.defineProperty,ks=Object.getOwnPropertyDescriptor;let Ts=class extends d{async deleteData(){await this.$dialogs.confirm.open("Delete data","All your data will be permanently deleted",{color:"error"})&&(await Ft.actions.cleanUpData(),await this.$router.push({name:"Home"}),window.location.reload())}};Ts=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?ks(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Cs(e,s,n),n})([u],Ts);const Ps={};var Ss=ht(Ts,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(S,{staticClass:"settings-data-management py-4 px-6",attrs:{elevation:"1"}},[s(et,[s("h2",[t._v("Data management")]),s("br"),s("div",[t._v(" All you data (events, profiles, etc.) is stored locally in browser's localStorage. "),s("br"),t._v(" Data security is being provided and managed by the browser. "),s("br"),s("a",{ref:"https://developer.mozilla.org/docs/Web/API/Window/localStorage"},[t._v("Learn more")])]),s("div",{staticClass:"mt-5"},[s("div",{staticClass:"text--secondary"},[t._v("You can remove all your data here")]),s(D,{staticClass:"mt-2",attrs:{color:"error"},on:{click:t.deleteData}},[t._v("Delete all data")])],1)])],1)}),[],!1,(function(t){for(let e in Ps)this[e]=Ps[e]}),null,null,null);Ss.options.__file="src/partials/settings/SettingsDataManagement.vue";var Os=Ss.exports,$s=Object.defineProperty,Is=Object.getOwnPropertyDescriptor;let js=class extends d{constructor(){super(...arguments),this.dialog=!1,this.importData_=null}exportData(){const t=JSON.stringify(Ft.state),e=new Blob([t],{type:"application/json;charset=utf-8"}),s=`xshed export ${(new Date).toLocaleString()}.json`;lt.exports.saveAs(e,s)}async importData(t){if(t){const e=await this.parseFile(t);this.importData_=JSON.parse(e),this.dialog=!0}}parseFile(t){return new Promise(((e,s)=>{const r=new FileReader;r.onload=function(t){var s;e((null==(s=t.target)?void 0:s.result)||"")},r.onerror=function(t){s(t)},r.readAsText(t,"UTF-8")}))}async overwriteData(){await Ft.actions.importDataWithOverwrite(this.importData_),this.dialog=!1}async mergeData(){await Ft.actions.importData(this.importData_),this.dialog=!1}cancelImport(){this.importData_=null,this.dialog=!1}};js=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?Is(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&$s(e,s,n),n})([u],js);const As={};var Ms=ht(js,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(S,{staticClass:"settings-session-management py-4 px-6",attrs:{elevation:"1"}},[s(et,[s("h2",[t._v("Session management")]),s("br"),s("div",{staticClass:"text--secondary"},[t._v("Export your current session")]),s(D,{staticClass:"mt-2",attrs:{color:"primary"},on:{click:t.exportData}},[t._v("Export")]),s("div",{staticClass:"text--secondary mt-8"},[t._v("Import your session from file")]),s(ct,{attrs:{clearable:"",placeholder:"Select file",accept:"application/json"},on:{change:t.importData}}),s(p,{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s(m,[s(v,{attrs:{dark:"",color:"error",dense:"",flat:""}},[s(f,{staticClass:"white--text"},[t._v("Data merge request")])],1),s(h,{staticClass:"pa-4"},[t._v(" Do you what to merge you data with current session or overwrite it? ")]),s(g,{staticClass:"pt-0"},[s(y),s(D,{attrs:{color:"primary darken-1"},on:{click:t.overwriteData}},[t._v("Overwrite")]),s(D,{attrs:{color:"primary"},on:{click:t.mergeData}},[t._v("Merge")]),s(D,{attrs:{color:"grey",text:""},on:{click:t.cancelImport}},[t._v("Cancel")])],1)],1)],1)],1)],1)}),[],!1,(function(t){for(let e in As)this[e]=As[e]}),null,null,null);Ms.options.__file="src/partials/settings/SettingsSessionManagement.vue";var Fs=Ms.exports,Ns=Object.defineProperty,Us=Object.getOwnPropertyDescriptor;let Bs=class extends d{};Bs=((t,e,s,r)=>{for(var a,n=r>1?void 0:r?Us(e,s):e,o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r?a(e,s,n):a(n))||n);return r&&n&&Ns(e,s,n),n})([u({components:{SettingsDataManagement:Os,SettingsSessionManagement:Fs}})],Bs);const Hs={};var Ls=ht(Bs,(function(){var t=this.$createElement,e=this._self._c||t;return e(tt,[e("SettingsSessionManagement"),e("SettingsDataManagement",{staticClass:"mt-4"})],1)}),[],!1,(function(t){for(let e in Hs)this[e]=Hs[e]}),"08c33770",null,null);Ls.options.__file="src/views/Settings.vue";var Rs=Ls.exports;d.use(dt);const Vs=new dt({mode:"history",base:"/xshed/",routes:[{path:"/",name:"Home",component:Es},{path:"/settings",name:"Settings",component:Rs},{path:"/about",name:"About",component:()=>function(t,e){if(!e)return t();if(void 0===ue){const t=document.createElement("link").relList;ue=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in pe)return;pe[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const r=document.createElement("link");return r.rel=e?"stylesheet":ue,e||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),e?new Promise(((t,e)=>{r.addEventListener("load",t),r.addEventListener("error",e)})):void 0}))).then((()=>t()))}((()=>import("./About.acbc5881.js")),["/xshed/assets/About.acbc5881.js","/xshed/assets/vendor.fd151501.js","/xshed/assets/vendor.6a8dfc42.css"])}]});d.use(ut);var qs=new ut({});d.prototype.$dialogs={},d.config.productionTip=!1,new d({router:Vs,store:Nt,vuetify:qs,render:t=>t(de)}).$mount("#app");export{ht as n};
