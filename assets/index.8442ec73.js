var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,i=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&o(e,s,t[s]);if(r)for(var s of r(t))n.call(t,s)&&o(e,s,t[s]);return e},l=(e,r)=>t(e,s(r));import{c,G as d,M as u,V as p,A as m,a as v,i as f,b as h,f as g,d as y,C as D,_ as w,e as x,g as _,h as b,j as E,k,l as C,m as T,n as P,W as S,o as O,p as $,q as I,r as j,s as A,P as M,E as F,t as N,u as U,v as B,w as H,x as L,y as R,z as q,B as V,D as W,F as z,H as Y,I as J,J as K,K as X,L as G,N as Q,O as Z,Q as ee,R as te,S as se,T as re,U as ae,X as ne,Y as oe,Z as ie,$ as le,a0 as ce,a1 as de}from"./vendor.8145e7fb.js";var ue=[c(),e=>{e.subscribe(((e,t)=>{window.localStorage.setItem("xshed.storage",JSON.stringify(t))}))}];function pe(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}const me=JSON.parse(window.localStorage.getItem("xshed.storage")||"{}"),ve={Id:pe(),Title:"Default",Color:"#1867c0"};function fe(e,t){const s=null!=e?e:new Date,r=6e4*(t||s.getTimezoneOffset());return new Date(s.getTime()-r).toISOString().slice(0,-1)}function he(e){const t=fe(e),[s,r]=t.split(".")[0].replace("T"," ").split(" ");return[s,r.slice(0,5)].join(" ")}function ge(e){return fe(e).slice(0,10)}const ye=e=>{const t=e.AllDay?ge(new Date(e.Start)):he(new Date(e.Start)),s=e.AllDay?ge(new Date(e.End)):he(new Date(e.End)),r=xe.getters.userProfileById(e.ProfileId);return{id:e.Id,name:e.Scope?`${e.Category}:${e.Scope}`:e.Category,start:t,end:s,allDay:!!e.AllDay,type:e.Category,scope:e.Scope,comment:e.Comment,category:r.Title}};const De=new v({state:class{constructor(){this.events=me.events||[],this.defaultProfile=me.defaultProfile||ve,this.profiles=me.profiles||[ve],this.selectedProfileId=me.selectedProfileId||ve.Id}},getters:class extends d{get profileEvents(){return this.state.events.filter((e=>e.ProfileId===this.state.selectedProfileId)).map(ye)}get events(){return this.state.events.map(ye)}get categories(){return[...this.state.events.reduce(((e,t)=>e.add(t.Category)),new Set).values()].filter(Boolean)}get scopes(){return[...this.state.events.reduce(((e,t)=>e.add(t.Scope||"")),new Set).values()].filter(Boolean)}get userProfile(){const e=this.state.selectedProfileId;return this.getters.userProfileById(e)}get userProfileById(){return e=>this.state.profiles.find((t=>t.Id===e))||this.state.defaultProfile}get userProfileByTitle(){return e=>this.state.profiles.find((t=>t.Title===e))||this.state.defaultProfile}},mutations:class extends u{setEvent(e){const t=this.state.events,s=t.findIndex((t=>t.Id===e.Id));-1!==s?p.set(t,s,e):t.push(e)}removeEvent(e){const t=this.state.events,s=t.findIndex((t=>t.Id===e));-1!==s&&t.splice(s,1)}setProfile(e){this.state.profiles.push(e)}setSelectedProfile(e){this.state.selectedProfileId=e}resetState(){this.state.profiles=[],this.state.events=[],this.state.selectedProfileId=""}commitState(){}},actions:class extends m{async addEvent(e){const t=e.ProfileId||this.getters.userProfile.Id,s=l(i({},e),{ProfileId:t});this.commit("setEvent",s)}async updateEvent(e){this.commit("setEvent",e)}async updatePartialEvent(e){const t=this.state.events.findIndex((t=>t.Id===e.Id));if(t>=0){const s=this.state.events[t],r=i(i({},s),e);this.commit("setEvent",r)}}async deleteEvent(e){this.commit("removeEvent",e.id)}async addProfile(e){const t={Id:pe(),Title:e.Title,Color:e.Color};this.commit("setProfile",t)}async cleanUpData(){this.commit("resetState"),localStorage.clear()}async importDataWithOverwrite(e){this.state.events=e.events||[],this.state.profiles=e.profiles||[],this.state.defaultProfile=e.defaultProfile,this.state.selectedProfileId=e.selectedProfileId||e.defaultProfile.Id,this.commit("commitState")}async importData(e){this.state.events=[...this.state.events,...e.events||[]],this.state.profiles=[...this.state.profiles,...e.profiles||[]],this.commit("commitState")}},modules:{}});p.use(f);const we=h(De,{plugins:ue}),xe=De.context(we);var _e=new f.Store({state:{},mutations:{},actions:{},modules:{}});const be=g("#FFFFFF").rgba;function Ee(e){return y(g(e).rgba,be)>2}var ke=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor;let Te=class extends p{constructor(){super(...arguments),this.dialog=!1,this.profile=this.getDefaultProfile()}get isBackgroundWhite(){return Ee(this.profile.Color)}get titleTextColor(){return`${Ee(this.profile.Color)?"white":"black"}--text`}open(){this.dialog=!0,this.profile=this.getDefaultProfile()}getDefaultProfile(){return{Title:"",Color:"#1976d2"}}async save(){await xe.actions.addProfile(this.profile),this.close()}close(){this.dialog=!1}};Te=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?Ce(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&ke(t,s,n),n})([D],Te);function Pe(e,t,s,r,a,n,o,i){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):a&&(l=i?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}const Se={};var Oe=Pe(Te,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(w,{attrs:{"content-class":"add-profile-dialog",fullscreen:e.$vuetify.breakpoint.smAndDown,"max-width":"700px"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.close.apply(null,arguments)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s(x,{staticClass:"pb-4"},[s(x,{attrs:{dark:e.isBackgroundWhite}},[s("div",{staticClass:"dialog-title",style:{backgroundColor:e.profile.Color}},[s("div",{staticClass:"text-center text-h5",class:[e.titleTextColor]},[e._v("Customize your profiles")]),s(_,{staticClass:"default-avatar",attrs:{size:"80",color:e.profile.Color}},[s(b,{class:[e.titleTextColor],attrs:{large:""}},[e._v("mdi-account")])],1)],1)]),s("div",{staticClass:"d-flex flex-column mt-16 mx-4"},[s(E,{attrs:{filled:"",autofocus:"",placeholder:"Add a name or a label like Work or Personal"},model:{value:e.profile.Title,callback:function(t){e.$set(e.profile,"Title",t)},expression:"profile.Title"}}),s(k,{staticClass:"mx-auto",attrs:{elevation:"0",outlined:""}},[s(C,{staticClass:"pb-0"},[e._v("Pick a theme color")]),s(T,{staticClass:"color-picker",attrs:{mode:"hexa","hide-canvas":"","hide-inputs":"","hide-sliders":"","show-swatches":"","swatches-max-height":"300px"},model:{value:e.profile.Color,callback:function(t){e.$set(e.profile,"Color",t)},expression:"profile.Color"}})],1),s("div",{staticClass:"d-flex justify-end mt-4"},[s(P,{attrs:{color:"primary",disabled:!e.profile.Title},on:{click:e.save}},[e._v("Done")])],1)],1)],1)],1)}),[],!1,(function(e){for(let t in Se)this[t]=Se[t]}),"28473ed9",null,null);Oe.options.__file="src/partials/dialogs/AddProfileDialog.vue";var $e=Oe.exports,Ie=Object.defineProperty,je=Object.getOwnPropertyDescriptor,Ae=(e,t,s,r)=>{for(var a,n=r>1?void 0:r?je(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Ie(t,s,n),n};let Me=class extends p{constructor(){super(...arguments),this.dialog=!1,this.resolve=null,this.reject=null,this.message=null,this.title=null,this.options=this.getDefaultOptions()}onDialogChanged(e){e||(this.options=this.getDefaultOptions())}open(e,t,s){return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,s),new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}confirm(){this.resolve&&this.resolve(!0),this.dialog=!1}cancel(){this.resolve&&this.resolve(!1),this.dialog=!1}getDefaultOptions(){return{color:"primary",width:290}}};Ae([S("dialog")],Me.prototype,"onDialogChanged",1),Me=Ae([D],Me);const Fe={};var Ne=Pe(Me,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(w,{attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel.apply(null,arguments)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s(k,[s(O,{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[s($,{staticClass:"white--text"},[e._v(e._s(e.title))])],1),s(I,{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pa-4"},[e._v(e._s(e.message))]),s(j,{staticClass:"pt-0"},[s(A),s(P,{attrs:{color:"primary darken-1",text:""},nativeOn:{click:function(t){return e.confirm.apply(null,arguments)}}},[e._v("Yes")]),s(P,{attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel.apply(null,arguments)}}},[e._v("Cancel")])],1)],1)],1)}),[],!1,(function(e){for(let t in Fe)this[t]=Fe[t]}),"46e29d48",null,null);Ne.options.__file="src/partials/dialogs/ConfirmDialog.vue";var Ue=Ne.exports;const Be=e=>t=>!!t||`${e} field is mandatory`;function He(e,t){return new Date(e.getTime()+6e4*t)}function Le(e){return new Intl.DateTimeFormat("en-US",{timeStyle:"short",hour12:!1}).format(e)}function Re(e,t,s=15){let r=new Date;const[a,n]=e.split(":");r.setHours(Number(a),Number(n),0,0);const o=[];for(;Le(r)<=t;)o.push(Le(r)),r=He(r,s);return o}var qe=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,We=(e,t,s,r)=>{for(var a,n=r>1?void 0:r?Ve(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&qe(t,s,n),n};let ze=class extends p{constructor(){super(...arguments),this.formModel=!1,this.menu=!1,this.startDate=this.getDateString(this.event.start),this.startDateFormatted=this.formatDate(this.startDate),this.startTime=this.getTimeString(this.event.start),this.endTime=this.getTimeString(this.event.end||""),this.allDay=this.event.allDay,this.category=this.event.type||"",this.scope=this.event.scope||"",this.comment=this.event.comment||"",this.profile=xe.getters.userProfileByTitle(this.event.category),this.validation={category:[Be("Category")]}}startDateUpdate(){this.startDateFormatted=this.formatDate(this.startDate)}get form(){return this.$refs.form}get visitTimeItems(){return Re("7:00","20:00",15)}formatDate(e){if(!e)return"";const[t,s,r]=e.split("-");return`${r}/${s}/${t}`}parseDate(e){if(!e)return"";const[t,s,r]=e.split("/");return`${r}-${s.padStart(2,"0")}-${t.padStart(2,"0")}`}getDateString(e){return e.substr(0,10)}getTimeString(e){return e.substr(11,5)}makeDateTime(e,t){return`${e} ${t}`}closeDialog(){}save(){var e;if(!this.form.validate())return null;const t=this.allDay?"00:00":this.startTime,s=this.allDay?"23:59":this.endTime;return{Id:this.event.id,Start:this.makeDateTime(this.startDate,t),End:this.makeDateTime(this.startDate,s),AllDay:this.allDay,Category:this.category,Scope:this.scope,Comment:this.comment,ProfileId:null==(e=this.profile)?void 0:e.Id}}};We([M({required:!1,type:Object})],ze.prototype,"event",2),We([M({required:!1,type:Array})],ze.prototype,"categories",2),We([M({required:!1,type:Array})],ze.prototype,"scopes",2),We([M({required:!1,type:Array})],ze.prototype,"profiles",2),We([M({type:Boolean})],ze.prototype,"loading",2),We([M({type:Boolean})],ze.prototype,"isAdmin",2),We([S("startDate")],ze.prototype,"startDateUpdate",1),We([F("close")],ze.prototype,"closeDialog",1),We([F()],ze.prototype,"save",1),ze=We([D],ze);const Ye={};var Je=Pe(ze,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(k,[s(N,[e._v("Edit event")]),s(I,[s(U,[s(B,{ref:"form",model:{value:e.formModel,callback:function(t){e.formModel=t},expression:"formModel"}},[s(H,[s(L,[s(R,{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[s(E,e._g(e._b({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(t){e.startDate=e.parseDate(e.startDateFormatted)}},model:{value:e.startDateFormatted,callback:function(t){e.startDateFormatted=t},expression:"startDateFormatted"}},"v-text-field",a,!1),r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[s(q,{attrs:{"no-title":"",scrollable:""},on:{input:function(t){e.menu=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}},[s(A),s(P,{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),s(P,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.startDate)}}},[e._v("OK")])],1)],1)],1),s(L,[s(V,{attrs:{label:"All day visit"},model:{value:e.allDay,callback:function(t){e.allDay=t},expression:"allDay"}})],1)],1),e.allDay?e._e():s(H,[s(L,[s(W,{attrs:{items:e.visitTimeItems,"prepend-icon":"mdi-clock-time-two-outline",label:"Start time"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),s(L,[s(W,{attrs:{items:e.visitTimeItems,rules:[function(t){return t>e.startTime||"End time should be greater than Start time"}],"prepend-icon":"mdi-clock-time-five-outline",label:"End time"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1),s(H,[s(L,[s(z,{attrs:{rules:e.validation.category,items:e.categories,"prepend-icon":"mdi-tune-variant",label:"Category"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),s(L,[s(z,{attrs:{items:e.scopes,"prepend-icon":"mdi-tune",label:"Scope"},model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}})],1)],1),s(H,[s(L,[s(W,{attrs:{items:e.profiles,"item-text":"Title","return-object":"","prepend-icon":"mdi-account",label:"Profile"},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}})],1)],1),s(H,[s(L,[s(Y,{attrs:{label:"Comment",counter:"",rows:"3","auto-grow":"","prepend-icon":"mdi-message-reply-text-outline"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1)],1)],1)],1),s(j,[s(A),s(P,{attrs:{color:"blue",text:""},on:{click:e.closeDialog}},[e._v("Close")]),s(P,{attrs:{color:"primary",disabled:!e.formModel,loading:e.loading},on:{click:e.save}},[e._v("Submit")])],1)],1)}),[],!1,(function(e){for(let t in Ye)this[t]=Ye[t]}),"82255880",null,null);Je.options.__file="src/components/EditEvent.vue";var Ke=Je.exports,Xe=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor;let Qe=class extends p{constructor(){super(...arguments),this.model=!1,this.event=null,this.loading=!1}get fullscreenModal(){return this.$vuetify.breakpoint.smAndDown}get categories(){return xe.getters.categories}get scopes(){return xe.getters.scopes}get profiles(){return xe.state.profiles}open(e){this.event=i({},e),this.model=!0}close(){this.model=!1,this.event=null}async onEventUpdate(e){if(e){this.loading=!0;try{await xe.actions.updateEvent(e),this.model=!1}catch(t){console.error(t)}finally{this.loading=!1}}}};Qe=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?Ge(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Xe(t,s,n),n})([D({components:{EditEvent:Ke}})],Qe);const Ze={};var et=Pe(Qe,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(w,{attrs:{fullscreen:e.fullscreenModal,"max-width":"700px"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[e.model&&e.event?s(Ke,{attrs:{event:e.event,loading:e.loading,categories:e.categories,scopes:e.scopes,profiles:e.profiles},on:{close:e.close,save:e.onEventUpdate}}):e._e()],1)}),[],!1,(function(e){for(let t in Ze)this[t]=Ze[t]}),"760e8978",null,null);et.options.__file="src/partials/dialogs/EditEventDialog.vue";var tt=et.exports,st=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,at=(e,t,s,r)=>{for(var a,n=r>1?void 0:r?rt(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&st(t,s,n),n};let nt=class extends p{constructor(){super(...arguments),this.formModel=!1,this.menu=!1,this.startDate=this.getLocalISODate(),this.startDateFormatted=this.formatDate(this.getLocalISODate()),this.startTime="",this.endTime="",this.allDay=!1,this.profile=xe.getters.userProfile,this.category="",this.scope="",this.comment="",this.validation={category:[Be("Category")]}}startDateUpdate(){this.startDateFormatted=this.formatDate(this.startDate)}get form(){return this.$refs.form}get visitTimeItems(){return Re("7:00","20:00",15)}formatDate(e){if(!e)return"";const[t,s,r]=e.split("-");return`${r}/${s}/${t}`}parseDate(e){if(!e)return"";const[t,s,r]=e.split("/");return`${r}-${s.padStart(2,"0")}-${t.padStart(2,"0")}`}created(){const e=new Date,t=e=>e.toLocaleString("default",{minimumIntegerDigits:2});if(this.timestamp){this.startDate=this.timestamp.date,this.startTime=`${t(this.timestamp.hour)}:00`;const e=He(new Date(`${this.startDate} ${t(this.timestamp.hour)}:00`),15);return void(this.endTime=`${t(e.getHours())}:${t(e.getMinutes())}`)}if(this.event){const[e,t]=this.event.start.split(" ");this.startDate=e,this.startTime=t;const[s,r]=this.event.end.split(" ");return this.endTime=r,this.category=this.event.type,this.scope=this.event.scope,this.comment=this.event.comment,void(this.event.category&&(this.profile=xe.getters.userProfileByTitle(this.event.category)))}this.startDate=e.toISOString().substr(0,10),this.startTime=`${t(e.getHours())}:00`;const s=He(new Date(`${this.startDate} ${t(e.getHours())}:00`),15);this.endTime=`${t(s.getHours())}:${t(s.getMinutes())}`}makeDateTime(e,t){return`${e} ${t}`}closeDialog(){}save(){var e;if(!this.form.validate())return null;const t=this.allDay?"00:00":this.startTime,s=this.allDay?"23:59":this.endTime;return{Id:pe(),Start:this.makeDateTime(this.startDate,t),End:this.makeDateTime(this.startDate,s),AllDay:this.allDay,Category:this.category,Scope:this.scope,Comment:this.comment,ProfileId:null==(e=this.profile)?void 0:e.Id}}getLocalISODate(){return fe(new Date).substr(0,10)}};at([M({required:!1,type:Object})],nt.prototype,"timestamp",2),at([M({required:!1,type:Object})],nt.prototype,"event",2),at([M({required:!1,type:Array})],nt.prototype,"categories",2),at([M({required:!1,type:Array})],nt.prototype,"scopes",2),at([M({required:!1,type:Array})],nt.prototype,"profiles",2),at([M({type:Boolean})],nt.prototype,"loading",2),at([M({type:Boolean})],nt.prototype,"isAdmin",2),at([S("startDate")],nt.prototype,"startDateUpdate",1),at([F("close")],nt.prototype,"closeDialog",1),at([F()],nt.prototype,"save",1),nt=at([D],nt);const ot={};var it=Pe(nt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(k,[s(N,[e._v("Create visit event")]),s(I,[s(U,[s(B,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.formModel,callback:function(t){e.formModel=t},expression:"formModel"}},[s(H,[s(L,[s(R,{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[s(E,e._g(e._b({attrs:{label:"Start date","prepend-icon":"mdi-calendar",readonly:""},on:{blur:function(t){e.startDate=e.parseDate(e.startDateFormatted)}},model:{value:e.startDateFormatted,callback:function(t){e.startDateFormatted=t},expression:"startDateFormatted"}},"v-text-field",a,!1),r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[s(q,{attrs:{"no-title":"",scrollable:""},on:{input:function(t){e.menu=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}},[s(A),s(P,{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),s(P,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.startDate)}}},[e._v("OK")])],1)],1)],1),s(L,[s(V,{attrs:{label:"All day visit"},model:{value:e.allDay,callback:function(t){e.allDay=t},expression:"allDay"}})],1)],1),e.allDay?e._e():s(H,[s(L,[s(W,{attrs:{items:e.visitTimeItems,"prepend-icon":"mdi-clock-time-two-outline",label:"Start time"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),s(L,[s(W,{attrs:{items:e.visitTimeItems,rules:[function(t){return t>e.startTime||"End time should be greater than Start time"}],"prepend-icon":"mdi-clock-time-five-outline",label:"End time"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1),s(H,[s(L,[s(z,{attrs:{rules:e.validation.category,items:e.categories,"prepend-icon":"mdi-tune-variant",label:"Category"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),s(L,[s(z,{attrs:{items:e.scopes,"prepend-icon":"mdi-tune",label:"Scope"},model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}})],1)],1),s(H,[s(L,[s(W,{attrs:{items:e.profiles,"item-text":"Title","return-object":"","prepend-icon":"mdi-account",label:"Profile"},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}})],1)],1),s(H,[s(L,[s(Y,{attrs:{label:"Comment",counter:"",rows:"3","auto-grow":"","prepend-icon":"mdi-message-reply-text-outline"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1)],1)],1)],1),s(j,[s(A),s(P,{attrs:{color:"blue",text:""},on:{click:e.closeDialog}},[e._v("Close")]),s(P,{attrs:{color:"primary",disabled:!e.formModel,loading:e.loading},on:{click:e.save}},[e._v("Create")])],1)],1)}),[],!1,(function(e){for(let t in ot)this[t]=ot[t]}),"40ba54b9",null,null);it.options.__file="src/components/NewEvent.vue";var lt=it.exports,ct=Object.defineProperty,dt=Object.getOwnPropertyDescriptor;let ut=class extends p{constructor(){super(...arguments),this.model=!1,this.timestamp=null,this.event=null,this.loading=!1}get fullscreenModal(){return this.$vuetify.breakpoint.smAndDown}get categories(){return xe.getters.categories}get scopes(){return xe.getters.scopes}get profiles(){return xe.state.profiles}open(e){e&&(e.start?this.event=e:this.timestamp=e),this.model=!0}close(){this.model=!1,this.timestamp=void 0}async onEventSave(e){if(e){this.loading=!0;try{await xe.actions.addEvent(e),this.model=!1}catch(t){console.error(t)}finally{this.loading=!1}}}};ut=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?dt(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&ct(t,s,n),n})([D({components:{NewEvent:lt}})],ut);const pt={};var mt=Pe(ut,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(w,{attrs:{fullscreen:e.fullscreenModal,"max-width":"700px"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[e.model?s(lt,{attrs:{timestamp:e.timestamp,event:e.event,loading:e.loading,categories:e.categories,scopes:e.scopes,profiles:e.profiles},on:{close:e.close,save:e.onEventSave}}):e._e()],1)}),[],!1,(function(e){for(let t in pt)this[t]=pt[t]}),"37916d4d",null,null);mt.options.__file="src/partials/dialogs/NewEventDialog.vue";var vt=mt.exports,ft=Object.defineProperty,ht=Object.getOwnPropertyDescriptor;let gt=class extends p{mounted(){this.$dialogs.profileDialog=this.$refs.profileDialog,this.$dialogs.confirm=this.$refs.confirmDialog,this.$dialogs.newEventDialog=this.$refs.newEventDialog,this.$dialogs.editEventDialog=this.$refs.editEventDialog}};gt=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?ht(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&ft(t,s,n),n})([D({components:{AddProfileDialog:$e,ConfirmDialog:Ue,NewEventDialog:vt,EditEventDialog:tt}})],gt);const yt={};var Dt=Pe(gt,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("AddProfileDialog",{ref:"profileDialog"}),t("ConfirmDialog",{ref:"confirmDialog"}),t("NewEventDialog",{ref:"newEventDialog"}),t("EditEventDialog",{ref:"editEventDialog"})],1)}),[],!1,(function(e){for(let t in yt)this[t]=yt[t]}),"4a1e9f0e",null,null);Dt.options.__file="src/partials/dialogs/Dialogs.vue";var wt=Dt.exports;var xt=Object.defineProperty,_t=Object.getOwnPropertyDescriptor;let bt=class extends p{constructor(){super(...arguments),this.selectedItem=null}get currentProfile(){return xe.getters.userProfile}get userProfiles(){return xe.state.profiles}get selectedProfile(){return xe.getters.userProfile}mounted(){this.selectedItem=this.currentProfile}userInitials(e){return function(e){var t,s;const r=new RegExp(/(\p{L}{1})\p{L}+/,"gu"),a=[...e.matchAll(r)];return(((null==(t=a.shift())?void 0:t[1])||"")+((null==(s=a.pop())?void 0:s[1])||"")).toUpperCase()}(e)}addProfile(){this.$dialogs.profileDialog.open()}selectCurrentProfile(e){this.selectedItem=e,xe.commit("setSelectedProfile",e.Id)}};bt=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?_t(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&xt(t,s,n),n})([D],bt);const Et={};var kt=Pe(bt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(R,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[s(P,e._g(e._b({attrs:{icon:"",fab:""}},"v-btn",a,!1),r),[s(_,{attrs:{color:e.currentProfile.Color,size:"40"}},[s("span",{staticClass:"white--text text-subtitle-1"},[e._v(e._s(e.userInitials(e.currentProfile.Title)))])])],1)]}}])},[s(J,{attrs:{nav:""}},[s(K,{attrs:{color:"primary"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},[e._l(e.userProfiles,(function(t){return[s(X,{key:t.Id,on:{click:function(s){return e.selectCurrentProfile(t)}}},[s(G,[s(_,{attrs:{color:t.Color,size:"40"}},[s("span",{staticClass:"white--text text-subtitle-1"},[e._v(e._s(e.userInitials(t.Title)))])])],1),s(Q,[e._v(e._s(t.Title))])],1)]}))],2),s(X,{attrs:{link:""},on:{click:e.addProfile}},[s(G,[s(b,[e._v("mdi-plus")])],1),s(Q,[e._v("Add")])],1)],1)],1)}),[],!1,(function(e){for(let t in Et)this[t]=Et[t]}),"24cee94e",null,null);kt.options.__file="src/partials/navigation/UserAccounts.vue";var Ct=kt.exports,Tt=Object.defineProperty,Pt=Object.getOwnPropertyDescriptor;let St=class extends p{toggleAppTheme(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark;const e=this.$vuetify.theme.dark?"dark":"light";localStorage.setItem("xshed.app-theme",e)}};St=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?Pt(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Tt(t,s,n),n})([D({components:{UserAccounts:Ct}})],St);const Ot={};var $t=Pe(St,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(Z,{attrs:{app:"",dense:"",elevation:"3"}},[s("div",{staticClass:"d-flex w-100",class:{container:this.$vuetify.breakpoint.lgAndUp}},[s(P,{staticClass:"btn-black",attrs:{tile:"",icon:"",fab:"",exact:"",to:{name:"Home"}}},[s(b,[e._v("mdi-home")])],1),s(A),s(P,{staticClass:"btn-black",attrs:{icon:"",tile:""},on:{click:e.toggleAppTheme}},[s(b,[e._v("mdi-theme-light-dark")])],1),s(P,{staticClass:"btn-black",attrs:{icon:"",tile:"",exact:"",to:{name:"Settings"}}},[s(b,[e._v("mdi-cog")])],1),s("UserAccounts")],1)])}),[],!1,(function(e){for(let t in Ot)this[t]=Ot[t]}),"33356d92",null,null);$t.options.__file="src/partials/Navigation.vue";var It=$t.exports,jt=Object.defineProperty,At=Object.getOwnPropertyDescriptor;let Mt=class extends p{mounted(){this.restoreAppTheme()}restoreAppTheme(){const e=localStorage.getItem("xshed.app-theme");this.$vuetify.theme.dark=!(!e||"dark"!==e)}};Mt=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?At(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&jt(t,s,n),n})([D({components:{Dialogs:wt,Navigation:It}})],Mt);const Ft={};var Nt=Pe(Mt,(function(){var e=this.$createElement,t=this._self._c||e;return t(ee,[t("Navigation"),t(te,{staticClass:"mt-4 mx-2"},[t("router-view")],1),t("Dialogs")],1)}),[],!1,(function(e){for(let t in Ft)this[t]=Ft[t]}),null,null,null);Nt.options.__file="src/App.vue";var Ut=Nt.exports;let Bt;const Ht={};var Lt=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,qt=(e,t,s,r)=>{for(var a,n=r>1?void 0:r?Rt(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Lt(t,s,n),n};let Vt=class extends p{created(){this.restoreCalendarType()}storeCalendarType(e){localStorage.setItem("xshed.calendar-view",e)}restoreCalendarType(){this.view=localStorage.getItem("xshed.calendar-view")||"day"}};qt([se()],Vt.prototype,"view",2),Vt=qt([D],Vt);const Wt={};var zt=Pe(Vt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(re,{staticClass:"calendar-view-switcher",attrs:{borderless:"",mandatory:""},on:{change:e.storeCalendarType},model:{value:e.view,callback:function(t){e.view=t},expression:"view"}},[s(P,{attrs:{value:"day",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[e._v("Day")]),s(b,[e._v("mdi-calendar-today")])],1),s(P,{attrs:{value:"week",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[e._v("Week")]),s(b,[e._v("mdi-calendar-range")])],1),s(P,{attrs:{value:"month",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[e._v("Month")]),s(b,[e._v("mdi-calendar-month")])],1),s(P,{attrs:{value:"category",text:"",color:"grey darken-2"}},[s("span",{staticClass:"hidden-md-and-down me-1"},[e._v("Profiles")]),s(b,[e._v("mdi-select-compare")])],1)],1)}),[],!1,(function(e){for(let t in Wt)this[t]=Wt[t]}),"904d779e",null,null);zt.options.__file="src/components/home/CalendarViewSwitcher.vue";var Yt=zt.exports,Jt=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,Xt=(e,t,s,r)=>{for(var a,n=r>1?void 0:r?Kt(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Jt(t,s,n),n};let Gt=class extends p{constructor(){super(...arguments),this.dateMenu=!1}get datePickerType(){return"month"===this.view?"MONTH":"DATE"}nextTimestamp(){}prevTimestamp(){}toToday(){}openDialog(){}};Xt([se()],Gt.prototype,"view",2),Xt([M()],Gt.prototype,"dateString",2),Xt([ae("date")],Gt.prototype,"date_",2),Xt([F()],Gt.prototype,"nextTimestamp",1),Xt([F()],Gt.prototype,"prevTimestamp",1),Xt([F()],Gt.prototype,"toToday",1),Xt([F()],Gt.prototype,"openDialog",1),Gt=Xt([D({components:{CalendarViewSwitcher:Yt}})],Gt);const Qt={};var Zt=Pe(Gt,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"calendar-ribbon"},[s(x,[s(H,{attrs:{"no-gutters":""}},[s(L,{staticClass:"d-flex",attrs:{cols:"12",sm:""}},[s(ne,{attrs:{bottom:"","open-delay":"900"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[s(P,e._g(e._b({staticClass:"mr-2",attrs:{outlined:"",large:"",color:"grey darken-2"},on:{click:e.openDialog}},"v-btn",a,!1),r),[s(b,[e._v("mdi-calendar-plus")]),s("span",{staticClass:"hidden-sm-and-down ms-1"},[e._v("Add event")])],1)]}}])},[s("span",[e._v("Add office visit")])]),s(ne,{attrs:{bottom:"","open-delay":"900"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[s(P,e._g(e._b({attrs:{outlined:"",large:"",color:"grey darken-2"},on:{click:e.toToday}},"v-btn",a,!1),r),[s(b,[e._v("mdi-calendar-cursor")]),s("span",{staticClass:"hidden-md-and-down ms-1"},[e._v("Show today")])],1)]}}])},[s("span",[e._v("Move to today date")])]),s(A),e.$vuetify.breakpoint.smAndDown?s(Yt,{model:{value:e.view,callback:function(t){e.view=t},expression:"view"}}):e._e()],1),s(L,{attrs:{cols:"12",sm:""}},[s(k,{staticClass:"d-flex align-center justify-space-between mx-2 text-truncate",attrs:{outlined:""}},[s(P,{staticClass:"px-0",attrs:{text:"",large:"",color:"grey darken-2","min-width":"40"},on:{click:e.prevTimestamp}},[s(b,[e._v("mdi-chevron-left")])],1),s(R,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[s(P,e._g(e._b({staticStyle:{"letter-spacing":"normal","font-weight":"normal"},attrs:{text:""}},"v-btn",a,!1),r),[e.dateString?s($,{staticClass:"mx-4"},[e._v(" "+e._s(e.dateString)+" ")]):e._e()],1)]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[s(q,{attrs:{"active-picker":e.datePickerType,"no-title":"",scrollable:""},on:{input:function(t){e.dateMenu=!1}},model:{value:e.date_,callback:function(t){e.date_=t},expression:"date_"}})],1),s(P,{staticClass:"px-0",attrs:{text:"",large:"",color:"grey darken-2","min-width":"40"},on:{click:e.nextTimestamp}},[s(b,[e._v("mdi-chevron-right")])],1)],1)],1),e.$vuetify.breakpoint.mdAndUp?s(L,[s(Yt,{staticClass:"d-flex justify-end",model:{value:e.view,callback:function(t){e.view=t},expression:"view"}})],1):e._e()],1)],1)],1)}),[],!1,(function(e){for(let t in Qt)this[t]=Qt[t]}),"7d7fffbf",null,null);Zt.options.__file="src/components/home/CalendarRibbon.vue";var es=Zt.exports;function ts(e){if(!e)return"#111";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);let s="#";for(let r=0;r<3;r++){s+=("00"+(t>>8*r&255).toString(16)).substr(-2)}return s}var ss=Object.defineProperty,rs=Object.getOwnPropertyDescriptor,as=(e,t,s,r)=>{for(var a,n=r>1?void 0:r?rs(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&ss(t,s,n),n};let ns=class extends p{get getComment(){return this.visit.comment||"The event comment was not provided"}get getEventColor(){return this.visit?ts(this.visit.type):"#222"}get getTextColorClass(){return`${Ee(this.getEventColor)?"white":"black"}--text`}get isBackgroundWhite(){return Ee(this.getEventColor)}openEditDialog(e){this.$dialogs.editEventDialog.open(e)}async deleteVisitEvent(e){if(e.id){await this.$dialogs.confirm.open("Delete","Are you sure you want to delete this visit?",{color:"error"})&&(await xe.actions.deleteEvent(e),this.close())}}close(){}};as([M({type:Object,required:!0})],ns.prototype,"visit",2),as([F()],ns.prototype,"close",1),ns=as([D],ns);const os={};var is=Pe(ns,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(k,{attrs:{flat:"","min-width":"350px"}},[s(O,{class:e.getTextColorClass,attrs:{color:e.getEventColor}},[s($,{staticClass:"ml-3",domProps:{textContent:e._s(e.visit.name)}}),s(A),s(P,{attrs:{dark:e.isBackgroundWhite,icon:""},on:{click:e.close}},[s(b,{class:e.getTextColorClass},[e._v("mdi-window-close")])],1)],1),s(I,[s("div",{staticClass:"mb-2"},[s("h3",[e._v("Comment")]),s("div",{staticClass:"subtitle-1"},[e._v(" "+e._s(e.getComment)+" ")])])]),s(j,[s(P,{attrs:{color:"error",elevation:"0"},on:{click:function(t){return e.deleteVisitEvent(e.visit)}}},[s(b,{staticClass:"mr-2"},[e._v("mdi-delete")]),e._v(" Delete ")],1),s(P,{attrs:{color:"primary",elevation:"0"},on:{click:function(t){return e.openEditDialog(e.visit)}}},[s(b,{staticClass:"mr-2"},[e._v("mdi-pencil")]),e._v(" Edit ")],1)],1)],1)}),[],!1,(function(e){for(let t in os)this[t]=os[t]}),"47fdac0e",null,null);is.options.__file="src/components/home/VisitEventMenuPreview.vue";var ls=is.exports;function cs(e,t){const{down:s,roundTo:r}=i(i({},{down:!1,roundTo:60}),t),a=60*r*1e3;return s?e-e%a:e+(a-e%a)}function ds(e){return new Date(e.year,e.month-1,e.day,e.hour,e.minute).getTime()}var us=Object.defineProperty,ps=Object.getOwnPropertyDescriptor;let ms=class extends p{constructor(){super(...arguments),this.view="day",this.currentDate="",this.calendarReady=!1,this.weekdays=[1,2,3,4,5,6,0],this.roundMinutes=15,this.selectedEvent=null,this.selectedElement=null,this.dragEvent=!1,this.draftEvent=null,this.extendEvent=null,this.selectedOpen=!1}get calendarInstance(){return this.$refs.calendar}get calendarTitle(){if(!this.calendarReady)return"";const e=this.calendarInstance.title;if("day"===this.view){return`${this.currentDate?Number(this.currentDate.split("-").pop()):(new Date).getDate()} ${e}`}if("week"===this.view){const e=this.calendarInstance.lastStart,t=this.calendarInstance.lastEnd,s=e.day,r=t.day,a=new Date(e.date).toLocaleString("en-US",{month:"short"}),n=new Date(t.date).toLocaleString("en-US",{month:"short"});return`${s} ${a===n?"":a} ${e.year===t.year?"":e.year} - ${r} ${n} ${t.year}`}return e}get nowY(){return this.calendarReady?this.calendarInstance.timeToY(this.calendarInstance.times.now)+"px":"-10px"}get events(){if("month"===this.view)return xe.getters.profileEvents;{const e="category"===this.view?[...xe.getters.events]:[...xe.getters.profileEvents];if(this.dragEvent&&e.push(this.draftEvent),this.extendEvent){const t=e.findIndex((e=>e.id===this.extendEvent.id));t>=0&&p.set(e,t,this.extendEvent)}return e}}get userProfileCategories(){return xe.state.profiles.slice()}mounted(){this.calendarInstance.checkChange(),this.calendarReady=!0}toToday(){this.currentDate=""}setViewDay({date:e}){this.currentDate=e,this.view="day"}nextTimestamp(){this.calendarInstance.next()}prevTimestamp(){this.calendarInstance.prev()}getEventColor(e){var t;const s=e.type?ts(e.type):"#000000";return e.id===(null==(t=this.extendEvent)?void 0:t.id)?`${s}B3`:s}showEvent(e){const{nativeEvent:t,event:s}=e,r=()=>{var e;const r=this.selectedEvent;if(this.selectedEvent=s,this.selectedElement=t.target,(null==r?void 0:r.id)===(null==(e=this.selectedEvent)?void 0:e.id))return this.$dialogs.editEventDialog.open(this.selectedEvent),void(this.selectedOpen=!1);setTimeout((()=>{this.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(r,10)):r()}mouseDownExistEvent({nativeEvent:e}){e.stopPropagation()}createDraftEvent(e){if(!this.dragEvent&&null===this.draftEvent){const t=ds(e),s=new Date(cs(t,{roundTo:this.roundMinutes,down:!0})),r=e.category?e.category:xe.getters.userProfile;this.dragEvent=!0,this.draftEvent={name:"#Draft event",start:he(s),category:r.Title},this.updateDraftEvent(e)}}updateDraftEvent(e){const t=ds(e),s=new Date(cs(t,{roundTo:this.roundMinutes}));if(this.dragEvent&&null!==this.draftEvent){const e=new Date(this.draftEvent.start);e.setHours(s.getHours()),e.setMinutes(s.getMinutes()),this.draftEvent=l(i({},this.draftEvent),{end:he(e)})}else if(this.extendEvent){const e=new Date(this.extendEvent.start);e.setHours(s.getHours()),e.setMinutes(s.getMinutes()),this.extendEvent.end=he(e)}}async endDraftEvent(){if(this.dragEvent=!1,this.draftEvent&&(this.openNewEventDialog(this.draftEvent),this.draftEvent=null),this.extendEvent){const e=this.extendEvent;this.extendEvent=null,await xe.actions.updatePartialEvent({Id:e.id,End:e.end})}}cancelDrag(){this.dragEvent=!1,this.draftEvent=null,this.extendEvent=null}extendEventBottom(e){this.extendEvent=e}openNewEventDialog(e){this.$dialogs.newEventDialog.open(e)}closeSelectedEventMenu(){this.selectedOpen=!1}getTextColor(e){return Ee(e.type?ts(e.type):"#222")?"white":"black"}};ms=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?ps(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&us(t,s,n),n})([D({components:{CalendarRibbon:es,VisitEventMenuPreview:ls}})],ms);const vs={};var fs=Pe(ms,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"d-flex flex-column"},[s(es,{staticClass:"mb-2",attrs:{date:e.currentDate,"date-string":e.calendarTitle},on:{"update:date":function(t){e.currentDate=t},"to-today":e.toToday,"next-timestamp":e.nextTimestamp,"prev-timestamp":e.prevTimestamp,"open-dialog":function(t){return e.openNewEventDialog()}},model:{value:e.view,callback:function(t){e.view=t},expression:"view"}}),s(oe,{ref:"calendar",style:{"user-select":[this.dragEvent?"none":""]},attrs:{type:e.view,categories:e.userProfileCategories,"category-text":"Title","category-show-all":"","first-time":"7:00","interval-count":14,weekdays:e.weekdays,events:e.events,"event-color":e.getEventColor,"event-text-color":e.getTextColor,locale:"en-US"},on:{"click:interval":e.openNewEventDialog,"click:event":e.showEvent,"click:date":e.setViewDay,"mousedown:event":e.mouseDownExistEvent,"mousedown:time":e.createDraftEvent,"mousemove:time":e.updateDraftEvent,"mouseup:time":e.endDraftEvent,"mousedown:time-category":e.createDraftEvent,"mousemove:time-category":e.updateDraftEvent,"mouseup:time-category":e.endDraftEvent},nativeOn:{mouseleave:function(t){return e.cancelDrag.apply(null,arguments)}},scopedSlots:e._u([{key:"day-body",fn:function(t){var r=t.date,a=t.week;return[s("div",{staticClass:"v-current-time",class:{first:r===a[0].date},style:{top:e.nowY}})]}},{key:"event",fn:function(t){return[s("div",{staticClass:"v-event-draggable px-2",domProps:{innerHTML:e._s(t.eventSummary())}}),t.timed?s("div",{staticClass:"v-event-drag-bottom",on:{mousedown:function(s){return s.stopPropagation(),e.extendEventBottom(t.event)}}}):e._e()]}}]),model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}}),s(R,{attrs:{activator:e.selectedElement,"close-on-content-click":!1,"max-width":"500px","offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[e.selectedEvent?[s(ls,{attrs:{visit:e.selectedEvent},on:{close:e.closeSelectedEventMenu}})]:e._e()],2)],1)}),[],!1,(function(e){for(let t in vs)this[t]=vs[t]}),null,null,null);fs.options.__file="src/partials/home/Calendar.vue";var hs=fs.exports,gs=Object.defineProperty,ys=Object.getOwnPropertyDescriptor;let Ds=class extends p{};Ds=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?ys(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&gs(t,s,n),n})([D({components:{Calendar:hs}})],Ds);const ws={};var xs=Pe(Ds,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home",class:{container:this.$vuetify.breakpoint.lgAndUp}},[t("Calendar")],1)}),[],!1,(function(e){for(let t in ws)this[t]=ws[t]}),null,null,null);xs.options.__file="src/views/Home.vue";var _s=xs.exports,bs=Object.defineProperty,Es=Object.getOwnPropertyDescriptor;let ks=class extends p{async deleteData(){await this.$dialogs.confirm.open("Delete data","All your data will be permanently deleted",{color:"error"})&&(await xe.actions.cleanUpData(),await this.$router.push({name:"Home"}),window.location.reload())}};ks=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?Es(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&bs(t,s,n),n})([D],ks);const Cs={};var Ts=Pe(ks,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(x,{staticClass:"settings-data-management py-4 px-6",attrs:{elevation:"1"}},[s(B,[s("h2",[e._v("Data management")]),s("br"),s("div",[e._v(" All you data (events, profiles, etc.) is stored locally in browser's localStorage. "),s("br"),e._v(" Data security is being provided and managed by the browser. "),s("br"),s("a",{ref:"https://developer.mozilla.org/docs/Web/API/Window/localStorage"},[e._v("Learn more")])]),s("div",{staticClass:"mt-5"},[s("div",{staticClass:"text--secondary"},[e._v("You can remove all your data here")]),s(P,{staticClass:"mt-2",attrs:{color:"error"},on:{click:e.deleteData}},[e._v("Delete all data")])],1)])],1)}),[],!1,(function(e){for(let t in Cs)this[t]=Cs[t]}),null,null,null);Ts.options.__file="src/partials/settings/SettingsDataManagement.vue";var Ps=Ts.exports,Ss=Object.defineProperty,Os=Object.getOwnPropertyDescriptor;let $s=class extends p{constructor(){super(...arguments),this.dialog=!1,this.importData_=null}exportData(){const e=JSON.stringify(xe.state),t=new Blob([e],{type:"application/json;charset=utf-8"}),s=`xshed export ${(new Date).toLocaleString()}.json`;ie.exports.saveAs(t,s)}async importData(e){if(e){const t=await this.parseFile(e);this.importData_=JSON.parse(t),this.dialog=!0}}parseFile(e){return new Promise(((t,s)=>{const r=new FileReader;r.onload=function(e){var s;t((null==(s=e.target)?void 0:s.result)||"")},r.onerror=function(e){s(e)},r.readAsText(e,"UTF-8")}))}async overwriteData(){await xe.actions.importDataWithOverwrite(this.importData_),this.dialog=!1}async mergeData(){await xe.actions.importData(this.importData_),this.dialog=!1}cancelImport(){this.importData_=null,this.dialog=!1}};$s=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?Os(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Ss(t,s,n),n})([D],$s);const Is={};var js=Pe($s,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(x,{staticClass:"settings-session-management py-4 px-6",attrs:{elevation:"1"}},[s(B,[s("h2",[e._v("Session management")]),s("br"),s("div",{staticClass:"text--secondary"},[e._v("Export your current session")]),s(P,{staticClass:"mt-2",attrs:{color:"primary"},on:{click:e.exportData}},[e._v("Export")]),s("div",{staticClass:"text--secondary mt-8"},[e._v("Import your session from file")]),s(le,{attrs:{clearable:"",placeholder:"Select file",accept:"application/json"},on:{change:e.importData}}),s(w,{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s(k,[s(O,{attrs:{dark:"",color:"error",dense:"",flat:""}},[s($,{staticClass:"white--text"},[e._v("Data merge request")])],1),s(I,{staticClass:"pa-4"},[e._v(" Do you what to merge you data with current session or overwrite it? ")]),s(j,{staticClass:"pt-0"},[s(A),s(P,{attrs:{color:"primary darken-1"},on:{click:e.overwriteData}},[e._v("Overwrite")]),s(P,{attrs:{color:"primary"},on:{click:e.mergeData}},[e._v("Merge")]),s(P,{attrs:{color:"grey",text:""},on:{click:e.cancelImport}},[e._v("Cancel")])],1)],1)],1)],1)],1)}),[],!1,(function(e){for(let t in Is)this[t]=Is[t]}),null,null,null);js.options.__file="src/partials/settings/SettingsSessionManagement.vue";var As=js.exports,Ms=Object.defineProperty,Fs=Object.getOwnPropertyDescriptor;let Ns=class extends p{};Ns=((e,t,s,r)=>{for(var a,n=r>1?void 0:r?Fs(t,s):t,o=e.length-1;o>=0;o--)(a=e[o])&&(n=(r?a(t,s,n):a(n))||n);return r&&n&&Ms(t,s,n),n})([D({components:{SettingsDataManagement:Ps,SettingsSessionManagement:As}})],Ns);const Us={};var Bs=Pe(Ns,(function(){var e=this.$createElement,t=this._self._c||e;return t(U,[t("SettingsSessionManagement"),t("SettingsDataManagement",{staticClass:"mt-4"})],1)}),[],!1,(function(e){for(let t in Us)this[t]=Us[t]}),"08c33770",null,null);Bs.options.__file="src/views/Settings.vue";var Hs=Bs.exports;p.use(ce);const Ls=new ce({mode:"history",base:"/xshed/",routes:[{path:"/",name:"Home",component:_s},{path:"/settings",name:"Settings",component:Hs},{path:"/about",name:"About",component:()=>function(e,t){if(!t)return e();if(void 0===Bt){const e=document.createElement("link").relList;Bt=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in Ht)return;Ht[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":Bt,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>import("./About.d91bcd2e.js")),["/xshed/assets/About.d91bcd2e.js","/xshed/assets/vendor.8145e7fb.js","/xshed/assets/vendor.d37f3ae4.css"])}]});p.use(de);var Rs=new de({});p.prototype.$dialogs={},p.config.productionTip=!1,new p({router:Ls,store:_e,vuetify:Rs,render:e=>e(Ut)}).$mount("#app");export{Pe as n};
